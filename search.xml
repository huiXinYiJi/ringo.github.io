<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Google授权登录及Android支付(uniapp-app)</title>
      <link href="/google-uniapp/"/>
      <url>/google-uniapp/</url>
      
        <content type="html"><![CDATA[<p>uniapp&#x9879;&#x76EE;&#x8FDB;&#x884C; &#x201C;app&#x7AEF;Google&#x6388;&#x6743;&#x767B;&#x5F55;&#x53CA;&#x62C9;&#x8D77;&#x652F;&#x4ED8;&#x201D; &#x6D41;&#x7A0B;&#xFF0C; &#x4EE5;&#x53CA;google&#x540E;&#x53F0;&#x76F8;&#x5173;&#x914D;&#x7F6E;</p><a id="more"></a><h3 id="&#x8C37;&#x6B4C;&#x6388;&#x6743;&#x767B;&#x5F55;"><a href="#&#x8C37;&#x6B4C;&#x6388;&#x6743;&#x767B;&#x5F55;" class="headerlink" title="&#x8C37;&#x6B4C;&#x6388;&#x6743;&#x767B;&#x5F55;"></a>&#x8C37;&#x6B4C;&#x6388;&#x6743;&#x767B;&#x5F55;</h3><p>uniapp&#x9879;&#x76EE;&#x8C37;&#x6B4C;&#x6388;&#x6743;&#x767B;&#x5F55;&#x53C2;&#x8003;&#xFF1A;<br><a href="https://uniapp.dcloud.net.cn/tutorial/app-oauth-google.html#%E5%BC%80%E9%80%9A" target="_blank" rel="noopener">&#x5B98;&#x65B9;&#x94FE;&#x63A5;</a></p><p>app&#x7AEF;&#x6388;&#x6743;&#x767B;&#x5F55;&#x914D;&#x7F6E;&#x6CE8;&#x610F;&#xFF1A;</p><p>manifest.json =&gt; APP &#x6A21;&#x5757;&#x914D;&#x7F6E; =&gt; OAuth(&#x767B;&#x5F55;&#x9274;&#x6743;) =&gt; Google&#x767B;&#x5F55; =&gt; IOS&#x5E73;&#x53F0;&#x5BA2;&#x6237;&#x7AEF;ID</p><p>&#x6B64;&#x5904;&#x586B;&#x5165;ios&#x7AEF; &#x5BA2;&#x6237;&#x7AEF;ID</p><p>&#x5BF9;&#x4E8E;android&#x7AEF;&#x914D;&#x7F6E;&#xFF0C;&#x65E0;&#x987B;&#x5728;manifest.json&#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x4F46;&#x662F;&#x5728;Google Cloud&#x540E;&#x53F0;&#xFF0C;&#x4E5F;&#x540C;&#x6837;&#x9700;&#x8981;&#x521B;&#x5EFA; android&#x7AEF;&#x5BA2;&#x6237;&#x7AEF;ID</p><blockquote><p>android&#x7AEF;&#xFF0C;&#x8BF7;&#x4E3A;&#x9879;&#x76EE;&#x521B;&#x5EFA;keystore&#x6587;&#x4EF6;&#xFF0C;&#x6839;&#x636E;keystore&#x6587;&#x4EF6;&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7684;SHA-1&#x8BC1;&#x4E66;&#x6307;&#x7EB9;&#xFF0C;&#x5BF9;&#x5E94;&#x751F;&#x6210;&#x547D;&#x4EE4;&#x5728;Google Cloud&#x540E;&#x53F0;&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;ID&#x4E0B;&#x65B9;&#x6709;</p></blockquote><p> <img src="/google-uniapp/google-uniapp_1.png" alt="google-uniapp"></p><blockquote><p>&#x9488;&#x5BF9; SHA-1&#x8BC1;&#x4E66;&#x6307;&#x7EB9;&#xFF0C;&#x8C03;&#x8BD5;&#x65F6;&#xFF0C;&#x8BF7;&#x5C06;&#x6B64; SHA-1&#x6307;&#x7EB9;&#x66FF;&#x6362;&#x4E3A; &#x672C;&#x5730;keystore&#x6587;&#x4EF6;&#x7684;&#x5BF9;&#x5E94;SHA-1&#x503C;&#xFF0C;&#x82E5;app&#x9700;&#x8981;&#x4E0A;&#x7EBF;&#x6216;&#x9488;&#x5BF9;&#x5DF2;&#x4E0A;&#x4F20;&#x5230;google&#x540E;&#x53F0;&#x7684;aab&#x5305;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#xFF0C;&#x8BF7;&#x5C06;&#x6B64;&#x5904;SHA-1&#x503C;&#x66FF;&#x6362;&#x4E3A;Google&#x751F;&#x6210;&#x7684;&#x3010;&#x5E94;&#x7528;&#x7B7E;&#x540D;&#x5BC6;&#x94A5;&#x8BC1;&#x4E66;&#x3011;&#xFF08;&#x53EF;&#x5728;google play console&#x2013;&#x8BBE;&#x7F6E;&#x2013;&#x5E94;&#x7528;&#x7B7E;&#x540D; &#x9875;&#x9762;&#x67E5;&#x770B;&#xFF09;&#xFF0C;&#x5426;&#x5219;google&#x767B;&#x5F55;&#x65E0;&#x6CD5;&#x56DE;&#x8C03;</p></blockquote><p><img src="/google-uniapp/google-uniapp_2.png" alt="google-uniapp"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #ifdef APP-PLUS</span></span><br><span class="line">  <span class="keyword">const</span> _that = <span class="keyword">this</span>;</span><br><span class="line">  uni.login({</span><br><span class="line">    provider: <span class="string">&apos;google&apos;</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">loginRes</span>) </span>{</span><br><span class="line">      <span class="built_in">console</span>.log(loginRes)</span><br><span class="line">      <span class="keyword">if</span> (loginRes.errMsg === <span class="string">&apos;login:ok&apos;</span>) {</span><br><span class="line">        <span class="comment">// &#x767B;&#x5F55;&#x6210;&#x529F;</span></span><br><span class="line">        uni.getUserInfo({</span><br><span class="line">          provider: <span class="string">&apos;google&apos;</span>,</span><br><span class="line">          success: <span class="function"><span class="keyword">function</span>(<span class="params">info</span>) </span>{</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;google &#x767B;&#x5F55;===&gt;:&apos;</span>, info);</span><br><span class="line">            <span class="comment">// openid: info.userInfo.openid,</span></span><br><span class="line">            <span class="comment">// unionid: info.userInfo.unionid,</span></span><br><span class="line">            <span class="comment">// email: info.userInfo.email,</span></span><br><span class="line">            <span class="comment">// todo your own business</span></span><br><span class="line">          },</span><br><span class="line">        });</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        uni.showToast({</span><br><span class="line">          icon: <span class="string">&apos;none&apos;</span>,</span><br><span class="line">          title: <span class="string">&apos;Login Fail: &apos;</span> + <span class="built_in">JSON</span>.stringify(loginRes),</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    fail: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">      uni.showToast({</span><br><span class="line">        icon: <span class="string">&apos;none&apos;</span>,</span><br><span class="line">        title: <span class="string">&apos;Connect Fail: &apos;</span> + <span class="built_in">JSON</span>.stringify(err),</span><br><span class="line">      });</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line"><span class="comment">// #endif</span></span><br></pre></td></tr></table></figure><h3 id="google&#x652F;&#x4ED8;app&#x7AEF;&#x62C9;&#x8D77;"><a href="#google&#x652F;&#x4ED8;app&#x7AEF;&#x62C9;&#x8D77;" class="headerlink" title="google&#x652F;&#x4ED8;app&#x7AEF;&#x62C9;&#x8D77;"></a>google&#x652F;&#x4ED8;app&#x7AEF;&#x62C9;&#x8D77;</h3><p>&#x4EE3;&#x7801;&#x5C42;&#x9762;&#xFF1A;uniapp&#x63D2;&#x4EF6;&#x5E02;&#x573A;&#x8D2D;&#x4E70;&#x63D2;&#x4EF6;&#xFF0C;&#x6309;&#x8BF4;&#x660E;&#x4F7F;&#x7528;</p><p>&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5C42;&#x9762;&#xFF1A;</p><p>1&#x3001;&#x70B9;&#x51FB;&#x652F;&#x4ED8;&#xFF0C;&#x68C0;&#x67E5;&#x5386;&#x53F2;&#x8BA2;&#x5355;(&#x67E5;&#x8BE2;&#x6210;&#x529F;&#xFF0C;&#x82E5;&#x6709;&#x9057;&#x7559;&#x5219;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x5E76;&#x6D88;&#x8017;)&#xFF0C;&#x662F;&#x5426;&#x5DF2;&#x88AB;&#x6D88;&#x8D39;&#xFF0C;&#x5904;&#x7406;&#x5B8C;&#x6210;&#xFF0C;&#x67E5;&#x8BE2;Google&#x5546;&#x54C1;&#x5217;&#x8868;&#xFF0C;&#x67E5;&#x8BE2;&#x6210;&#x529F;&#xFF0C;&#x521B;&#x5EFA;&#x8BA2;&#x5355;&#xFF0C;&#x521B;&#x5EFA;&#x8BA2;&#x5355;&#x6210;&#x529F;&#xFF0C;&#x53D1;&#x8D77;Google&#x652F;&#x4ED8;&#xFF0C;&#x5C06;&#x8BA2;&#x5355;&#x4F20;&#x9012;&#x5230;google&#x652F;&#x4ED8;&#x65B9;&#x6CD5;&#x5185;<br>2&#x3001;&#x9488;&#x5BF9;google&#x652F;&#x4ED8;&#x65B9;&#x6CD5;&#xFF0C;&#x652F;&#x4ED8;&#x6210;&#x529F;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x8D2D;&#x4E70;&#x6210;&#x529F;&#xFF0C;&#x9488;&#x5BF9;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x63D0;&#x793A;<br>3&#x3001;&#x5BF9;&#x4E8E;&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x652F;&#x4ED8;&#x7ED3;&#x679C;&#x975E;&#x6210;&#x529F;&#xFF0C;&#x82E5;errorCode===7&#xFF0C;&#x4EE3;&#x8868;&#x6B64;&#x5546;&#x54C1;&#x672A;&#x6D88;&#x8D39;&#xFF0C;&#x5219;&#x67E5;&#x8BE2;&#x5386;&#x53F2;&#x8BA2;&#x5355;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x5E76;&#x6D88;&#x8017;<br>4&#x3001;&#x5BF9;&#x4E8E;&#x6D88;&#x8D39;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x5E76;&#x6D88;&#x8D39;&#x8BA2;&#x5355;&#xFF0C;&#x524D;&#x7AEF;&#x5E76;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x6D88;&#x8D39;&#xFF0C;&#x6CE8;&#x610F;&#x7528;&#x6237;&#x8D2D;&#x4E70;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x5148;&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x8BA2;&#x5355;&#x6709;&#x6548;&#x6027;&#xFF0C;&#x518D;&#x53BB;&#x6D88;&#x8D39;&#x8BA2;&#x5355;&#xFF0C;&#x63A5;&#x7740;&#x518D;&#x53BB;&#x7ED9;&#x7528;&#x6237;&#x53D1;&#x9001;&#x76F8;&#x5173;&#x670D;&#x52A1;<br>5&#x3001;&#x7528;&#x6237;&#x8FDB;&#x5165;app&#x65F6;&#xFF0C;&#x53EF;&#x67E5;&#x8BE2;&#x8D2D;&#x4E70;&#x8BB0;&#x5F55;&#xFF0C;&#x9488;&#x5BF9;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x8BA2;&#x5355;&#x8FDB;&#x884C;&#x518D;&#x6B21;&#x6D88;&#x8D39;&#xFF08;&#x53CA;&#x540E;&#x7EED;&#x64CD;&#x4F5C;&#xFF09;&#x5904;&#x7406;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #ifdef APP</span></span><br><span class="line"><span class="keyword">const</span> googlePay = uni.requireNativePlugin(<span class="string">&apos;GT-GooglePay-V5__PayModule&apos;</span>);</span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  data() {</span><br><span class="line"><span class="keyword">return</span> {</span><br><span class="line"><span class="comment">// #ifdef APP</span></span><br><span class="line">prdList: [],</span><br><span class="line">payList: [],</span><br><span class="line">isGoogleConnect: <span class="literal">false</span>,</span><br><span class="line">isPaying: <span class="literal">false</span>,</span><br><span class="line">      google_sku_id: <span class="string">&apos;app_appname_companyname_coin10000&apos;</span></span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">onUnload() {</span><br><span class="line">uni.setStorageSync(<span class="string">&apos;pli&apos;</span>, [])</span><br><span class="line">uni.hideLoading()</span><br><span class="line">},</span><br><span class="line">methods: {</span><br><span class="line">    doInit() {</span><br><span class="line">      googlePay.doInit({}, e =&gt; {</span><br><span class="line">          <span class="keyword">if</span> (e.code == <span class="number">200</span>) {</span><br><span class="line">            <span class="comment">// &#x521D;&#x59CB;&#x5316;&#x6210;&#x529F;</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;&#x8FDE;&#x63A5;&#x8C37;&#x6B4C;&#x6210;&#x529F;&apos;</span>);</span><br><span class="line">            <span class="keyword">this</span>.isGoogleConnect = <span class="literal">true</span></span><br><span class="line">            <span class="comment">// &#x67E5;&#x8BE2;&#x5386;&#x53F2;&#x8BA2;&#x5355;</span></span><br><span class="line">            <span class="keyword">this</span>.doQueryPurchases(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">              <span class="comment">// console.log(res)</span></span><br><span class="line">              <span class="keyword">this</span>.doQuerySku()</span><br><span class="line">            })</span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            <span class="comment">// &#x521D;&#x59CB;&#x5316;&#x5931;&#x8D25;</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;&#x8FDE;&#x63A5;&#x8C37;&#x6B4C;&#x5931;&#x8D25;&apos;</span>);</span><br><span class="line">            uni.hideLoading()</span><br><span class="line">            that.showToast(<span class="string">&apos;&#x8FDE;&#x63A5;&#x8C37;&#x6B4C;&#x5931;&#x8D25;&apos;</span>);</span><br><span class="line">            <span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">          }</span><br><span class="line">        });</span><br><span class="line">    },</span><br><span class="line">    doQueryPurchases(callback) {</span><br><span class="line">        <span class="keyword">let</span> that = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// console.log(&apos;do doQueryPurchases function.&apos;);</span></span><br><span class="line">        uni.setStorageSync(<span class="string">&apos;pli&apos;</span>, []) <span class="comment">// &#x9488;&#x5BF9;&#x91CD;&#x590D;&#x8BF7;&#x6C42;</span></span><br><span class="line">        googlePay.doQueryPurchases(</span><br><span class="line">          <span class="string">&apos;inapp&apos;</span>,</span><br><span class="line">          e =&gt; {</span><br><span class="line">            <span class="keyword">if</span> (e.code == <span class="number">200</span>) {</span><br><span class="line">              <span class="comment">// &#x67E5;&#x8BE2;&#x6210;&#x529F;</span></span><br><span class="line">              <span class="comment">// console.log(&apos;queryPurchases&#x6210;&#x529F;&apos;);</span></span><br><span class="line">              <span class="keyword">if</span> (e.purchasesList == <span class="literal">null</span> || e.purchasesList.length == <span class="number">0</span>) {</span><br><span class="line">                <span class="comment">// &#x65E0;&#x9057;&#x7559;&#x5F85;&#x5904;&#x7406;&#x8BA2;&#x5355;</span></span><br><span class="line">                callback()</span><br><span class="line">              } <span class="keyword">else</span> {</span><br><span class="line">                that.payList = e.purchasesList</span><br><span class="line">                <span class="comment">// &#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;&#x5E76;&#x6D88;&#x8017;</span></span><br><span class="line">                that.verifyOrder(callback)</span><br><span class="line">              }</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">              <span class="comment">// &#x67E5;&#x8BE2;&#x5931;&#x8D25;</span></span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">&apos;google queryPurchases&#x5931;&#x8D25;&apos;</span>);</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">        );</span><br><span class="line">      },</span><br><span class="line">      <span class="comment">// &#x670D;&#x52A1;&#x5668;&#x786E;&#x8BA4;&#x8BA2;&#x5355;</span></span><br><span class="line">      verifyOrder(callback) {</span><br><span class="line">        <span class="keyword">const</span> promises = []</span><br><span class="line">        <span class="keyword">this</span>.payList.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> {</span><br><span class="line">          promises.push(<span class="keyword">this</span>.verifyOrderRequest(<span class="built_in">JSON</span>.parse(item.originalJson)))</span><br><span class="line">        })</span><br><span class="line">        <span class="built_in">Promise</span>.allSettled(promises).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">          <span class="keyword">if</span> (promises.length === res.length) {</span><br><span class="line">            callback &amp;&amp; callback(res)</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">      },</span><br><span class="line">      <span class="comment">// &#x670D;&#x52A1;&#x5668;&#x786E;&#x8BA4;&#x8BA2;&#x5355; &#x63A5;&#x53E3;&#x8BF7;&#x6C42; &#x9A8C;&#x8BC1;&#x8BA2;&#x5355;&#x5E76;&#x6D88;&#x8017;</span></span><br><span class="line">      verifyOrderRequest(data) {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> {</span><br><span class="line">          <span class="comment">// &#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x5B58;&#x5728; &#x5DF2;&#x5B58;&#x5728;&#x5219;&#x4E0D;&#x8BF7;&#x6C42;</span></span><br><span class="line">          <span class="keyword">const</span> storageList = uni.getStorageSync(<span class="string">&apos;pli&apos;</span>) || [];</span><br><span class="line">          <span class="keyword">const</span> curToken = data.purchaseToken</span><br><span class="line">          <span class="keyword">if</span> (storageList.includes(curToken)) {</span><br><span class="line">            uni.hideLoading()</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">          }</span><br><span class="line">          uni.setStorageSync(<span class="string">&apos;pli&apos;</span>, [...storageList, curToken])</span><br><span class="line">          <span class="comment">// &#x53D1;&#x8D77;&#x8BF7;&#x6C42;</span></span><br><span class="line">          uni.request({</span><br><span class="line">            url: <span class="string">&apos;/api/paygoogle&apos;</span>,</span><br><span class="line">            data, <span class="comment">// google &#x56DE;&#x8C03;&#x53C2;&#x6570;</span></span><br><span class="line">            method: <span class="string">&apos;POST&apos;</span>,</span><br><span class="line">            success: <span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">              <span class="comment">// console.log(&apos;&#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;verifyOrder: ===&gt;&apos;, res)</span></span><br><span class="line">              <span class="comment">// &#x6210;&#x529F; &#x670D;&#x52A1;&#x5668;&#x6D88;&#x8017;</span></span><br><span class="line">              <span class="keyword">if</span> (res.data.code === <span class="number">1</span>) {</span><br><span class="line">                resolve(data)</span><br><span class="line">              } <span class="keyword">else</span> {</span><br><span class="line">                <span class="comment">// &#x8BF7;&#x6C42;&#x51FA;&#x9519; &#x5220;&#x9664;&#x7F13;&#x5B58; &#x53EF;&#x91CD;&#x65B0;&#x8BF7;&#x6C42;</span></span><br><span class="line">                <span class="keyword">const</span> newStorageList = uni.getStorageSync(<span class="string">&apos;pli&apos;</span>) || []</span><br><span class="line">                <span class="keyword">const</span> index = newStorageList.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item === curToken)</span><br><span class="line">                <span class="keyword">if</span> (index) {</span><br><span class="line">                  newStorageList.splice(index, <span class="number">1</span>)</span><br><span class="line">                  uni.setStorageSync(<span class="string">&apos;pli&apos;</span>, newStorageList)</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x9519;&#x8BEF;&#x7ED3;&#x679C;</span></span><br><span class="line">                <span class="keyword">if</span> (res.data.code === <span class="number">0</span>) {</span><br><span class="line">                  reject(res.data.msg)</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                  reject(<span class="string">&apos;&#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;&#x51FA;&#x9519;&#xFF0C;&#x8BF7;&#x8054;&#x7CFB;&#x7BA1;&#x7406;&#x5458;&apos;</span>)</span><br><span class="line">                }</span><br><span class="line">              }</span><br><span class="line">            },</span><br><span class="line">            fail: <span class="function">(<span class="params">data, code</span>) =&gt;</span> {</span><br><span class="line">              uni.showToast({</span><br><span class="line">                icon: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">                title: <span class="string">&apos;&#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;&#x51FA;&#x9519;&#xFF0C;&#x8BF7;&#x8054;&#x7CFB;&#x7BA1;&#x7406;&#x5458;&apos;</span></span><br><span class="line">              })</span><br><span class="line">            }</span><br><span class="line">          });</span><br><span class="line">        })</span><br><span class="line">      },</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x67E5;&#x8BE2;sku</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">doQuerySku() {</span><br><span class="line"><span class="keyword">let</span> that = <span class="keyword">this</span>;</span><br><span class="line">googlePay.doQuerySku({</span><br><span class="line">inapp: [<span class="keyword">this</span>.google_sku_id], <span class="comment">// GOOGLE&#x540E;&#x53F0;&#x914D;&#x7F6E;&#x7684;&#x5546;&#x54C1;ID</span></span><br><span class="line">},</span><br><span class="line">e =&gt; {</span><br><span class="line"><span class="keyword">if</span> (e.code == <span class="number">200</span>) {</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x6210;&#x529F;</span></span><br><span class="line"><span class="comment">// e.list; // &#x67E5;&#x8BE2;&#x7ED3;&#x679C;, array</span></span><br><span class="line"><span class="comment">// console.log(&apos;&#x67E5;&#x8BE2;&#x6210;&#x529F;&#xFF1A; &apos;, e.list);</span></span><br><span class="line">that.prdList = e.list;</span><br><span class="line">that.createOrder()</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">uni.hideLoading()</span><br><span class="line"><span class="comment">// &#x67E5;&#x8BE2;&#x5931;&#x8D25;</span></span><br><span class="line">that.showToast(<span class="string">&apos;&#x672A;&#x67E5;&#x8BE2;&#x5230;&#x5E94;&#x7528;&#x5185;&#x5546;&#x54C1;&apos;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;&#x672A;&#x67E5;&#x8BE2;&#x5230;&#x5E94;&#x7528;&#x5185;&#x5546;&#x54C1;&apos;</span>);</span><br><span class="line"><span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">);</span><br><span class="line">},</span><br><span class="line">    <span class="comment">// &#x521B;&#x5EFA;&#x8BA2;&#x5355;</span></span><br><span class="line">createOrder() {</span><br><span class="line">uni.request({</span><br><span class="line">url: <span class="string">&apos;/api/payGoogle/sumbitOrder&apos;</span>,</span><br><span class="line">data: {</span><br><span class="line">google_sku_id: <span class="keyword">this</span>.google_sku_id,</span><br><span class="line">},</span><br><span class="line">method: <span class="string">&apos;POST&apos;</span>,</span><br><span class="line">success: <span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">uni.hideLoading()</span><br><span class="line"><span class="keyword">if</span> (res.data.code === <span class="number">1</span>) {</span><br><span class="line"><span class="keyword">const</span> orderSn = res.data.data.order_id</span><br><span class="line"><span class="keyword">this</span>.doPayAll(orderSn)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">uni.showToast({</span><br><span class="line">icon: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">title: <span class="string">&apos;&#x521B;&#x5EFA;&#x8BA2;&#x5355;&#x5931;&#x8D25;&apos;</span></span><br><span class="line">})</span><br><span class="line"><span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">fail: <span class="function">(<span class="params">data, code</span>) =&gt;</span> {</span><br><span class="line">uni.hideLoading()</span><br><span class="line"><span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">uni.showToast({</span><br><span class="line">icon: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">title: <span class="string">&apos;&#x7F51;&#x7EDC;&#x51FA;&#x9519;&apos;</span></span><br><span class="line">})</span><br><span class="line">}</span><br><span class="line">});</span><br><span class="line">},</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#x53D1;&#x8D77;&#x652F;&#x4ED8;2</span></span><br><span class="line"><span class="comment"> * &#x652F;&#x4ED8;&#x53C2;&#x6570;&#x4E3A;&#x67E5;&#x8BE2;sku&#x7ED3;&#x679C;&#x7684;&#x67D0;&#x4E00;&#x9879;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">doPayAll(orderSn) {</span><br><span class="line"><span class="keyword">const</span> that = <span class="keyword">this</span></span><br><span class="line"><span class="keyword">if</span> (!orderSn) {</span><br><span class="line">that.showToast(<span class="string">&apos;&#x672A;&#x521B;&#x5EFA;&#x8BA2;&#x5355;&#xFF0C;&#x8BF7;&#x91CD;&#x8BD5;&apos;</span>);</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;do pay function.&apos;</span>);</span><br><span class="line"><span class="keyword">if</span> (that.prdList == <span class="literal">null</span> || that.prdList.length == <span class="number">0</span>) {</span><br><span class="line">that.showToast(<span class="string">&apos;&#x4EA7;&#x54C1;&#x5217;&#x8868;&#x4E3A;&#x7A7A;&#xFF0C;&#x4E0D;&#x53EF;&#x652F;&#x4ED8;&apos;</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line">googlePay.doPayAll({</span><br><span class="line">productId: that.prdList[<span class="number">0</span>].productId,</span><br><span class="line">offerToken: <span class="string">&apos;&apos;</span>, <span class="comment">//&#x53EF;&#x9009;&#xFF0C;&#x6298;&#x6263;token</span></span><br><span class="line">accountId: orderSn, <span class="comment">// &#x53EF;&#x9009;&#xFF0C;&#x7528;&#x6237;Id</span></span><br><span class="line">profileId: <span class="string">&quot;&quot;</span>, <span class="comment">// &#x53EF;&#x9009;&#xFF0C;&#x4E2A;&#x4EBA;&#x8D44;&#x6599;Id</span></span><br><span class="line">}, e =&gt; {</span><br><span class="line"><span class="comment">// console.log(&apos;&#x652F;&#x4ED8;&#x7ED3;&#x679C;&#xFF1A;&apos;, e);</span></span><br><span class="line"><span class="keyword">if</span> (e.code == <span class="number">200</span>) {</span><br><span class="line"><span class="comment">// &#x652F;&#x4ED8;&#x6210;&#x529F;</span></span><br><span class="line"><span class="keyword">if</span> (e &amp;&amp; e.data) {</span><br><span class="line">that.payList = e.data;</span><br><span class="line"><span class="comment">// &#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x8D2D;&#x4E70;&#x6210;&#x529F;</span></span><br><span class="line">that.verifyOrder(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line"><span class="keyword">const</span> hasCurrentSuccessProList = res.find(<span class="function"><span class="params">item</span> =&gt;</span> item.status ===</span><br><span class="line"><span class="string">&apos;fulfilled&apos;</span> &amp;&amp; item.value.productId === that.curSkuSelected)</span><br><span class="line"><span class="comment">// &#x670D;&#x52A1;&#x7AEF;&#x5DF2;&#x6210;&#x529F;&#x5904;&#x7406;&#x5E76;&#x6D88;&#x8D39;&#x8BA2;&#x5355;</span></span><br><span class="line"><span class="keyword">if</span> (hasCurrentSuccessProList) {</span><br><span class="line"><span class="comment">// console.log(&apos;&#x670D;&#x52A1;&#x7AEF;&#x5DF2;&#x6210;&#x529F;&#x5904;&#x7406;&#x5E76;&#x6D88;&#x8D39;&#x8BA2;&#x5355;:&apos;,hasCurrentSuccessProList, res)</span></span><br><span class="line">uni.navigateBack()</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">that.showToast(<span class="string">&apos;&#x8D2D;&#x4E70;&#x6210;&#x529F;&apos;</span>) <span class="comment">// &#x6B63;&#x5F0F;&#x8D2D;&#x4E70;&#x6210;&#x529F;</span></span><br><span class="line">}, <span class="number">2000</span>)</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line"><span class="keyword">const</span> fail = res.find(<span class="function"><span class="params">item</span> =&gt;</span> item.status === <span class="string">&apos;rejected&apos;</span>)</span><br><span class="line"><span class="comment">// console.log(&apos;fail:&apos;, fail)</span></span><br><span class="line">fail &amp;&amp; that.showToast(fail.reason)</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">})</span><br><span class="line">}</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line"><span class="keyword">if</span> (e.errorCode === <span class="number">7</span>) {</span><br><span class="line"><span class="comment">// &#x6839;&#x636E;&#x5546;&#x54C1;id&#xFF0C;&#x67E5;&#x8BE2;&#x8BE5;&#x672A;&#x6D88;&#x8017;&#x5546;&#x54C1;&#x7684;&#x4FE1;&#x606F;</span></span><br><span class="line"><span class="comment">// &#x670D;&#x52A1;&#x5668;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x8D2D;&#x4E70;&#x6210;&#x529F;</span></span><br><span class="line">that.doQueryPurchases()</span><br><span class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (e.errorCode !== <span class="number">1</span>) {</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&apos;&#x652F;&#x4ED8;&#x5931;&#x8D25;&#xFF1A; &apos;</span>, e);</span><br><span class="line">that.showToast(<span class="string">&quot;&#x652F;&#x4ED8;&#x5931;&#x8D25;: &quot;</span> + e.data);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.isPaying = <span class="literal">false</span></span><br><span class="line">}</span><br><span class="line">});</span><br><span class="line">},</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h3 id="GOOGLE&#x652F;&#x4ED8;-H5&#x7AEF;"><a href="#GOOGLE&#x652F;&#x4ED8;-H5&#x7AEF;" class="headerlink" title="GOOGLE&#x652F;&#x4ED8; H5&#x7AEF;"></a>GOOGLE&#x652F;&#x4ED8; H5&#x7AEF;</h3><p>&#x9488;&#x5BF9;h5&#x7AEF;&#xFF0C;&#x6587;&#x6863;&#x5185;&#x6709;&#x5B8C;&#x6574;&#x4EE3;&#x7801;demo&#xFF0C;&#x53EF;&#x67E5;&#x770B;<a href="https://developers.google.com/pay/api/web/guides/resources/demos?hl=zh-cn" target="_blank" rel="noopener">&#x6B64;&#x5904;</a></p><p>h5&#x7AEF;&#x652F;&#x4ED8;&#x9700;&#x8981;&#x7B2C;&#x4E09;&#x65B9;&#x7F51;&#x5173;&#x8FDB;&#x884C;&#x5904;&#x7406;google&#x8FD4;&#x56DE;&#x7684;&#x56DE;&#x8C03;&#x7ED3;&#x679C;&#xFF0C;&#x4E00;&#x822C;&#x4E2A;&#x4EBA;&#x516C;&#x53F8;&#x662F;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x652F;&#x4ED8;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x76F4;&#x63A5;&#x96C6;&#x6210;&#x65B9;&#x5F0F;&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x9002;&#x7528;&#x3002;</p><p>&#x67E5;&#x770B;google&#x652F;&#x6301;&#x7684;<a href="https://developers.google.com/pay/api/web/overview?hl=zh-cn" target="_blank" rel="noopener">&#x7B2C;&#x4E09;&#x65B9;&#x7F51;&#x5173;&#x5217;&#x8868;</a></p><p>&#x5BF9;&#x4E8E;&#x9875;&#x9762;&#x6837;&#x5F0F;&#xFF0C;&#x8C37;&#x6B4C;&#x5BA1;&#x6838;&#x4E5F;&#x6709;&#x8981;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x6309;&#x7167; &#x96C6;&#x6210;&#x6838;&#x5BF9;&#x6E05;&#x5355; &#x8FDB;&#x884C;&#x64CD;&#x4F5C;</p><p>&#x5F00;&#x53D1;&#x6D4B;&#x8BD5;&#x5B8C;&#x6210;&#xFF0C;&#x9700;&#x8981;&#x7533;&#x8BF7;&#x5BF9;Google Pay API&#x7684;&#x6B63;&#x5F0F;&#x8BBF;&#x95EE;&#x6743;&#x3002;<br><img src="/google-uniapp/google-uniapp_4.png" alt="google-uniapp"></p><h4 id="h5&#x7AEF;&#x6D4B;&#x8BD5;"><a href="#h5&#x7AEF;&#x6D4B;&#x8BD5;" class="headerlink" title="h5&#x7AEF;&#x6D4B;&#x8BD5;"></a>h5&#x7AEF;&#x6D4B;&#x8BD5;</h4><p>&#x8BF7;&#x67E5;&#x770B;<a href="https://developers.google.com/pay/api/web/guides/resources/test-card-suite?hl=zh-cn" target="_blank" rel="noopener">&#x7533;&#x8BF7;&#x6D4B;&#x8BD5;&#x5361;&#x5957;&#x4EF6;</a>, &#x52A0;&#x5165;&#x201C;&#x7528;&#x6237;&#x7FA4;&#x7EC4;&#x201D;</p><p><img src="/google-uniapp/google-uniapp_3.png" alt="google-uniapp"></p><h3 id="app&#x7AEF;&#x8C03;&#x8BD5;"><a href="#app&#x7AEF;&#x8C03;&#x8BD5;" class="headerlink" title="app&#x7AEF;&#x8C03;&#x8BD5;"></a>app&#x7AEF;&#x8C03;&#x8BD5;</h3><p>Google Play Console &#x9875;&#x9762;&#xFF0C;&#x8BBE;&#x7F6E;&#x2014;&#x8BB8;&#x53EF;&#x6D4B;&#x8BD5;&#x9875;&#x9762;&#xFF0C;&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x4EBA;&#x5458;&#x7684;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#xFF0C;&#x8BB8;&#x53EF;&#x76F8;&#x5E94;&#x8BF7;&#x8BBE;&#x7F6E;&#x4E3A; &#x201C;LICENSED&#x201D;</p><h3 id="&#x670D;&#x52A1;&#x7AEF;&#x6743;&#x9650;&#x6821;&#x9A8C;"><a href="#&#x670D;&#x52A1;&#x7AEF;&#x6743;&#x9650;&#x6821;&#x9A8C;" class="headerlink" title="&#x670D;&#x52A1;&#x7AEF;&#x6743;&#x9650;&#x6821;&#x9A8C;"></a>&#x670D;&#x52A1;&#x7AEF;&#x6743;&#x9650;&#x6821;&#x9A8C;</h3><p>&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x53F7;&#x5E76;&#x4E0E;&#x9879;&#x76EE;&#x5173;&#x8054;&#xFF0C;&#x901A;&#x8FC7;&#x670D;&#x52A1;&#x53F7;&#x5BC6;&#x94A5;&#x8FDB;&#x884C;&#x6743;&#x9650;&#x6821;&#x9A8C;</p><p>&#x53C2;&#x8003;<a href="https://www.cuiwei.net/p/1370199631" target="_blank" rel="noopener">&#x6B64;&#x6587;&#x7AE0;</a>&#x8FDB;&#x884C;&#x914D;&#x7F6E;<br>&#x53C2;&#x8003;<a href="https://developers.google.com/android-publisher/getting_started?hl=zh-cn" target="_blank" rel="noopener">&#x6B64;&#x6587;&#x6863;</a></p><p>&#x8BF7;&#x6CE8;&#x610F; OAuth&#x540C;&#x610F;&#x5C4F;&#x5E55;&#x4E2D;&#xFF0C;&#x5728;&#x8303;&#x56F4;&#xFF08;scope&#xFF09;&#x9009;&#x9879;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x7684;API&#x6743;&#x9650;</p><p><img src="/google-uniapp/google-uniapp_5.png" alt="google-uniapp"></p><h3 id="google-play-&#x5185;&#x90E8;&#x5E94;&#x7528;&#x5206;&#x4EAB;&#x8BBE;&#x7F6E;"><a href="#google-play-&#x5185;&#x90E8;&#x5E94;&#x7528;&#x5206;&#x4EAB;&#x8BBE;&#x7F6E;" class="headerlink" title="google play &#x5185;&#x90E8;&#x5E94;&#x7528;&#x5206;&#x4EAB;&#x8BBE;&#x7F6E;"></a>google play &#x5185;&#x90E8;&#x5E94;&#x7528;&#x5206;&#x4EAB;&#x8BBE;&#x7F6E;</h3><p><img src="/google-uniapp/google-uniapp_6.jpg" alt="google-uniapp"></p><h3 id="&#x5176;&#x4ED6;&#x76F8;&#x5173;"><a href="#&#x5176;&#x4ED6;&#x76F8;&#x5173;" class="headerlink" title="&#x5176;&#x4ED6;&#x76F8;&#x5173;"></a>&#x5176;&#x4ED6;&#x76F8;&#x5173;</h3><blockquote><p>&#x4FEE;&#x6539;&#x76EE;&#x6807; API &#x7EA7;&#x522B;</p><blockquote><p>manifest.json&#x6E90;&#x7801;/&#x201C;app-plus&#x201D;/&#x201C;distribute&#x201D;/&#x201C;android&#x201D;/<br>&#x201C;targetSdkVersion&#x201D;: 33</p></blockquote></blockquote><blockquote><p>uniapp &#x4E91;&#x6253;&#x5305;&#xFF0C;&#x9700;&#x8981;&#x52FE;&#x9009; Google Play(AAB)&#x9009;&#x9879;&#xFF0C;&#x6253;&#x5305;&#x751F;&#x6210;.aab&#x683C;&#x5F0F;&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x6B64;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x5230; Google play console&#x540E;&#x53F0;&#x4E2D;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> uniapp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
            <tag> google </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue自定义全局登录插件</title>
      <link href="/vue-plugin-global/"/>
      <url>/vue-plugin-global/</url>
      
        <content type="html"><![CDATA[<p>vue&#x81EA;&#x5B9A;&#x4E49;&#x5168;&#x5C40;&#x767B;&#x5F55;&#x63D2;&#x4EF6;, &#x5728;&#x5168;&#x5C40;&#x4EFB;&#x610F;&#x4F4D;&#x7F6E;&#x4F7F;&#x7528;this.$login()&#x5373;&#x53EF;&#x8C03;&#x8D77;&#x767B;&#x5F55;&#x5F39;&#x7A97;<br>&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;<br>Login.vue&#xFF08;&#x767B;&#x5F55;&#x6837;&#x5F0F;&#x4E3B;&#x4F53;&#xFF09;<br>index.js&#xFF08;&#x63D2;&#x4EF6;&#x65B9;&#x6CD5;&#x53CA;&#x6CE8;&#x518C;&#x5230;&#x5168;&#x5C40;&#xFF09;<br>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</p><p>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;</p><a id="more"></a><h5 id="loading-vue"><a href="#loading-vue" class="headerlink" title="loading.vue"></a>loading.vue</h5><p>&#x6CE8;&#x610F;&#xFF1A;&#x82E5;&#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;i18n, &#x8BF7;&#x7528;i18n.t(keyName)&#xFF0C;&#x800C;&#x4E0D;&#x662F;this.$t(keyName)<br>listener&#x65B9;&#x6CD5;&#x53EF;&#x4F9B; &#x8C03;&#x7528;&#x7684;&#x7236;&#x7EC4;&#x4EF6;&#x5185; &#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#x53CA;&#x4F20;&#x9012;&#x503C;</p><blockquote><p>src/components/login/Login.vue</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;yr-modal</span><br><span class="line">    v-model=<span class="string">&quot;visible&quot;</span></span><br><span class="line">    title=<span class="string">&quot;&quot;</span></span><br><span class="line">    :width=<span class="string">&quot;410&quot;</span></span><br><span class="line">    :height=<span class="string">&quot;400&quot;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;login&quot;</span></span><br><span class="line">    :btns=<span class="string">&quot;false&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div slot=<span class="string">&quot;content&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;htitle&quot;</span>&gt;{{ i18n.t(<span class="string">&apos;loginTt&apos;</span>) }}&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div class=&quot;form&quot;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div class=&quot;input&quot;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input v-model=&quot;formData.userName&quot; type=&quot;text&quot; :placeholder=&quot;i18n.t(&apos;usercountTip&apos;)&quot; /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div class=&quot;input&quot;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input v-model=&quot;formData.password&quot; type=&quot;text&quot; :placeholder=&quot;i18n.t(&apos;userPwd&apos;)&quot; /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div class=&quot;btn&quot;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div class=&quot;log&quot; @click=&quot;login&quot;&gt;{{ i18n.t(&apos;login&apos;) }}&lt;/</span>div&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;reg&quot;</span>&gt;</span><br><span class="line">            &lt;a href=<span class="string">&quot;/register.html&quot;</span>&gt;{{ i18n.t(<span class="string">&apos;regTip&apos;</span>) }}&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/y</span>r-modal&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import Api from &apos;@/</span>api/api<span class="string">&apos;</span></span><br><span class="line"><span class="string">import { isDeviceMobile } from &apos;</span>@/js/util<span class="string">&apos;</span></span><br><span class="line"><span class="string">import i18n from &apos;</span>@/locales/index<span class="string">&apos;</span></span><br><span class="line"><span class="string">// import defaultSettings from &apos;</span>@/settings.js<span class="string">&apos;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default {</span></span><br><span class="line"><span class="string">  props: {</span></span><br><span class="line"><span class="string">    // eslint-disable-next-line</span></span><br><span class="line"><span class="string">    value: {},</span></span><br><span class="line"><span class="string">    listener: { // &#x6BCF;&#x4E2A;&#x9636;&#x6BB5;&#x4F1A;&#x56DE;&#x8C03;</span></span><br><span class="line"><span class="string">      type: Function,</span></span><br><span class="line"><span class="string">      default: null</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  data() {</span></span><br><span class="line"><span class="string">    return {</span></span><br><span class="line"><span class="string">      i18n: i18n,</span></span><br><span class="line"><span class="string">      visible: true,</span></span><br><span class="line"><span class="string">      formData: {</span></span><br><span class="line"><span class="string">        userName: &apos;</span><span class="string">&apos;,</span></span><br><span class="line"><span class="string">        password: &apos;</span><span class="string">&apos;</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  computed: {</span></span><br><span class="line"><span class="string">    isDeviceMobile() {</span></span><br><span class="line"><span class="string">      return isDeviceMobile()</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  watch: {</span></span><br><span class="line"><span class="string">    value: {</span></span><br><span class="line"><span class="string">      handler(val) {</span></span><br><span class="line"><span class="string">        if (val !== undefined) {</span></span><br><span class="line"><span class="string">          this.visible = val.visible</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">      },</span></span><br><span class="line"><span class="string">      deep: true,</span></span><br><span class="line"><span class="string">      immediate: true</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    visible: {</span></span><br><span class="line"><span class="string">      handler(val) {</span></span><br><span class="line"><span class="string">        if (!val) {</span></span><br><span class="line"><span class="string">          document.body.removeChild(this.$el)</span></span><br><span class="line"><span class="string">          this.$destroy()</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">      },</span></span><br><span class="line"><span class="string">      immediate: true</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  mounted() {</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  methods: {</span></span><br><span class="line"><span class="string">    close() {</span></span><br><span class="line"><span class="string">      this.visible = false</span></span><br><span class="line"><span class="string">      this.listener &amp;&amp; this.listener({ act: &apos;</span>close<span class="string">&apos; })</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    login() {</span></span><br><span class="line"><span class="string">      const params = {</span></span><br><span class="line"><span class="string">        userName: this.formData.userName,</span></span><br><span class="line"><span class="string">        password: this.formData.password</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">      const language = (i18n.locale || &apos;</span>zh-CN<span class="string">&apos;).toLowerCase()</span></span><br><span class="line"><span class="string">      Api.login(params, language).then(res =&gt; {</span></span><br><span class="line"><span class="string">        // &#x4F9B;&#x5916;&#x90E8;&#x4F7F;&#x7528;</span></span><br><span class="line"><span class="string">        // this.listener &amp;&amp; this.listener({ act: &apos;</span>login<span class="string">&apos;, res: res.data })</span></span><br><span class="line"><span class="string">      }).catch(() =&gt; {</span></span><br><span class="line"><span class="string">        return false</span></span><br><span class="line"><span class="string">      })</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;style lang=&quot;less&quot; scoped&gt;</span></span><br><span class="line"><span class="string">.login.yr-modal {</span></span><br><span class="line"><span class="string">  /deep/ .content {</span></span><br><span class="line"><span class="string">    text-align: center;</span></span><br><span class="line"><span class="string">    background:linear-gradient(180deg,rgba(255,255,255,1) 0%,rgba(248,251,254,1) 100%);</span></span><br><span class="line"><span class="string">    border-radius:4px;</span></span><br><span class="line"><span class="string">    top: 30%;</span></span><br><span class="line"><span class="string">    left: 50%;</span></span><br><span class="line"><span class="string">    transform: translate(-50%, -30%);</span></span><br><span class="line"><span class="string">    position: absolute;</span></span><br><span class="line"><span class="string">    max-width: calc(100% - 20px);</span></span><br><span class="line"><span class="string">    max-height: 100%;</span></span><br><span class="line"><span class="string">    .m-header {</span></span><br><span class="line"><span class="string">      padding-top: 24px;</span></span><br><span class="line"><span class="string">      padding-bottom: 32px;</span></span><br><span class="line"><span class="string">      border-bottom: none;</span></span><br><span class="line"><span class="string">      height: 70px;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    .m-content {</span></span><br><span class="line"><span class="string">      padding: 0 35px 45px;</span></span><br><span class="line"><span class="string">      .htitle {</span></span><br><span class="line"><span class="string">        font-size: 20px;</span></span><br><span class="line"><span class="string">        font-weight:600;</span></span><br><span class="line"><span class="string">        line-height:28px;</span></span><br><span class="line"><span class="string">        color: #1E1E1E;</span></span><br><span class="line"><span class="string">        letter-spacing: 2px;</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">      .form {</span></span><br><span class="line"><span class="string">        width: 100%;</span></span><br><span class="line"><span class="string">        margin-top: 40px;</span></span><br><span class="line"><span class="string">        margin-bottom: 40px;</span></span><br><span class="line"><span class="string">        color: #9D9EA5;</span></span><br><span class="line"><span class="string">        font-size:12px;</span></span><br><span class="line"><span class="string">        font-weight:400;</span></span><br><span class="line"><span class="string">        .input {</span></span><br><span class="line"><span class="string">          width: 100%;</span></span><br><span class="line"><span class="string">          height: 40px;</span></span><br><span class="line"><span class="string">          margin-bottom: 24px;</span></span><br><span class="line"><span class="string">          border-radius: 4px;</span></span><br><span class="line"><span class="string">          border:1px solid #C0C2CB;</span></span><br><span class="line"><span class="string">          input {</span></span><br><span class="line"><span class="string">            text-align: center;</span></span><br><span class="line"><span class="string">            background: #fff;</span></span><br><span class="line"><span class="string">            padding: 0 16px;</span></span><br><span class="line"><span class="string">            outline: 0;</span></span><br><span class="line"><span class="string">            height: calc(100% - 4px);</span></span><br><span class="line"><span class="string">            margin-left: 2px;</span></span><br><span class="line"><span class="string">            margin-right: 2px;</span></span><br><span class="line"><span class="string">            width: calc(100% - 4px);</span></span><br><span class="line"><span class="string">            margin-top: 1px;</span></span><br><span class="line"><span class="string">            position: relative;</span></span><br><span class="line"><span class="string">            top: 1px;</span></span><br><span class="line"><span class="string">            &amp;::-webkit-input-placeholder {</span></span><br><span class="line"><span class="string">              color: #9D9EA5;</span></span><br><span class="line"><span class="string">            }</span></span><br><span class="line"><span class="string">            &amp;::-moz-placeholder {</span></span><br><span class="line"><span class="string">              color: #9D9EA5;</span></span><br><span class="line"><span class="string">            }</span></span><br><span class="line"><span class="string">            &amp;::-ms-input-placeholder {</span></span><br><span class="line"><span class="string">              color: #9D9EA5;</span></span><br><span class="line"><span class="string">            }</span></span><br><span class="line"><span class="string">          }</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">        .btn {</span></span><br><span class="line"><span class="string">          width: 100%;</span></span><br><span class="line"><span class="string">          text-align: center;</span></span><br><span class="line"><span class="string">          .log {</span></span><br><span class="line"><span class="string">            display: block;</span></span><br><span class="line"><span class="string">            height:40px;</span></span><br><span class="line"><span class="string">            background:#1E1E1E;</span></span><br><span class="line"><span class="string">            box-shadow:0px 2px 3px 0px rgba(0,0,0,0.15);</span></span><br><span class="line"><span class="string">            border-radius:4px;</span></span><br><span class="line"><span class="string">            line-height: 40px;</span></span><br><span class="line"><span class="string">            color: #fff;</span></span><br><span class="line"><span class="string">            font-size: 14px;</span></span><br><span class="line"><span class="string">            margin-bottom: 20px;</span></span><br><span class="line"><span class="string">            cursor: pointer;</span></span><br><span class="line"><span class="string">          }</span></span><br><span class="line"><span class="string">          .reg {</span></span><br><span class="line"><span class="string">            text-align: center;</span></span><br><span class="line"><span class="string">            a {</span></span><br><span class="line"><span class="string">              font-size:12px;</span></span><br><span class="line"><span class="string">              font-weight:400;</span></span><br><span class="line"><span class="string">              color:#1159FF;</span></span><br><span class="line"><span class="string">              line-height:17px;</span></span><br><span class="line"><span class="string">              text-decoration: underline;</span></span><br><span class="line"><span class="string">            }</span></span><br><span class="line"><span class="string">          }</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure><h5 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h5><blockquote><p>src/components/login/index.js</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&apos;./Login.vue&apos;</span></span><br><span class="line"><span class="keyword">const</span> LOGIN = {</span><br><span class="line">  install(Vue, options = {}) {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">&apos;undefined&apos;</span> &amp;&amp; <span class="built_in">window</span>.Vue) {</span><br><span class="line">      Vue = <span class="built_in">window</span>.Vue</span><br><span class="line">    }</span><br><span class="line">    Vue.component(<span class="string">&apos;yrLogin&apos;</span>, Login)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">yrLogin</span>(<span class="params">options</span>) </span>{</span><br><span class="line">      <span class="keyword">const</span> VueLogin = Vue.extend({</span><br><span class="line">        data() {</span><br><span class="line">          <span class="keyword">return</span> {</span><br><span class="line">            options: { ...options }</span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        render(h) {</span><br><span class="line">          <span class="keyword">return</span> h(<span class="string">&apos;yrLogin&apos;</span>, {</span><br><span class="line">            props: <span class="keyword">this</span>.options</span><br><span class="line">          })</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">      <span class="keyword">const</span> newLogin = <span class="keyword">new</span> VueLogin()</span><br><span class="line">      <span class="keyword">const</span> vm = newLogin.$mount()</span><br><span class="line">      <span class="keyword">const</span> el = vm.$el</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(el)</span><br><span class="line">      vm.visible = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">return</span> vm</span><br><span class="line">    }</span><br><span class="line">    Vue.prototype.$yrLogin = yrLogin</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> LOGIN</span><br></pre></td></tr></table></figure><h5 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; src/main.js</span><br><span class="line"><span class="keyword">import</span> yrLogin <span class="keyword">from</span> <span class="string">&apos;@/components/login&apos;</span></span><br><span class="line">Vue.use(yrLogin)</span><br></pre></td></tr></table></figure><blockquote><p>&#x7EC4;&#x4EF6;&#x5185;&#x8C03;&#x7528;</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$yrLogin({</span><br><span class="line">  listener: <span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue自定义loading指令</title>
      <link href="/vue-loading-directive/"/>
      <url>/vue-loading-directive/</url>
      
        <content type="html"><![CDATA[<p>vue&#x81EA;&#x5B9A;&#x4E49;loading&#x6307;&#x4EE4;&#xFF0C;&#x5728;&#x5143;&#x7D20;&#x4E0A;&#x4F7F;&#x7528;&#x4F60;v-loading&#x53EF;&#x663E;&#x793A;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x65F6;&#x52A8;&#x753B;&#xFF0C;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x540E;&#x6D88;&#x5931;<br>&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x6587;&#x4EF6;&#xFF1A;<br>loading.vue&#xFF08;loading&#x6837;&#x5F0F;&#x4E3B;&#x4F53;&#xFF09;<br>loading.js&#xFF08;&#x81EA;&#x5B9A;&#x4E49;&#x6307;&#x4EE4;&#x76F8;&#x5173;&#x65B9;&#x6CD5;&#xFF09;<br>index.js&#xFF08;&#x6307;&#x4EE4;&#x6CE8;&#x518C;&#x5230;&#x5168;&#x5C40;&#xFF09;<br>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</p><p>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;</p><a id="more"></a><h5 id="loading-vue"><a href="#loading-vue" class="headerlink" title="loading.vue"></a>loading.vue</h5><blockquote><p>src/components/loading/loading.vue</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div</span><br><span class="line">    v-show=<span class="string">&quot;visible&quot;</span></span><br><span class="line">    :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[&apos;yr-loading&apos;, {&apos;yr-loading-FullScreen&apos;: fullscreen, &apos;yr-loading-sm&apos;: small}]&quot;</span></span><br><span class="line">    :style=<span class="string">&quot;{ background: background, top: topH + &apos;px&apos;, minHeight: minH + &apos;px&apos; }&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;mask-con&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;boxes&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;box&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;i in 4&quot;</span> :key=<span class="string">&quot;i&quot;</span>&gt;</span><br><span class="line">          &lt;div&gt;&lt;/div&gt;</span><br><span class="line">          &lt;div&gt;&lt;/div&gt;</span><br><span class="line">          &lt;div&gt;&lt;/div&gt;</span><br><span class="line">          &lt;div&gt;&lt;/div&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;box-tip&quot;</span> :style=<span class="string">&quot;{color: color, fontSize: fontSize + &apos;px&apos;}&quot;</span>&gt;{{langua[lang][<span class="string">&apos;loadingTip&apos;</span>]}}...&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      visible: <span class="literal">false</span>,</span><br><span class="line">      langua: {</span><br><span class="line">        <span class="string">&apos;zh-CN&apos;</span>: {</span><br><span class="line">          <span class="string">&apos;loadingTip&apos;</span>: <span class="string">&apos;&#x52A0;&#x8F7D;&#x4E2D;&apos;</span></span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">      fullscreen: <span class="literal">false</span>,</span><br><span class="line">      background: <span class="string">&apos;#fff&apos;</span>,</span><br><span class="line">      fontSize: <span class="number">14</span>,</span><br><span class="line">      color: <span class="string">&apos;#1E1E1E&apos;</span>,</span><br><span class="line">      topH: <span class="number">0</span>,</span><br><span class="line">      small: <span class="literal">false</span>,</span><br><span class="line">      minH: <span class="number">160</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    lang () {</span><br><span class="line">      <span class="keyword">return</span> localStorage.getItem(<span class="string">&apos;localeLanguage&apos;</span>) || <span class="string">&apos;zh-TW&apos;</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mounted () {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.fullscreen) {</span><br><span class="line">      <span class="built_in">document</span>.body.style.overflow = <span class="string">&apos;hidden&apos;</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  destroyed () {</span><br><span class="line">    <span class="built_in">document</span>.body.style.overflowX = <span class="string">&apos;hidden&apos;</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style lang=&quot;less&quot; scoped&gt;</span></span><br><span class="line"><span class="regexp">@color: #5C8DF6;</span></span><br><span class="line"><span class="regexp">@colorRight: darken(@color, 15%);</span></span><br><span class="line"><span class="regexp">@colorLeft: darken(@color, 5%);</span></span><br><span class="line"><span class="regexp">@shadow: #DBE3F4;</span></span><br><span class="line"><span class="regexp">@size: 25px;</span></span><br><span class="line"><span class="regexp">@duration:800ms;</span></span><br><span class="line"><span class="regexp">@top: auto;</span></span><br><span class="line"><span class="regexp">@right: auto;</span></span><br><span class="line"><span class="regexp">@bottom: auto;</span></span><br><span class="line"><span class="regexp">@left: auto;</span></span><br><span class="line"><span class="regexp">@rotateY: 0deg;</span></span><br><span class="line"><span class="regexp">@rotateX: 0deg;</span></span><br><span class="line"><span class="regexp">@translateZ: calc(@size /</span> <span class="number">2</span>);</span><br><span class="line">.yr-loading {</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  justify-content: center;</span><br><span class="line">  align-items: center;</span><br><span class="line">  z-index: <span class="number">900</span>;</span><br><span class="line">  background: #fff;</span><br><span class="line">  transition: opacity <span class="number">.3</span>s;</span><br><span class="line">  width: <span class="number">100</span>%;</span><br><span class="line">  height: <span class="number">100</span>%;</span><br><span class="line">  position: absolute;</span><br><span class="line">  min-width: <span class="number">100</span>%;</span><br><span class="line">  .boxes {</span><br><span class="line">    height: calc(@size * <span class="number">2</span>);</span><br><span class="line">    width: calc(@size * <span class="number">3</span>);</span><br><span class="line">    position: relative;</span><br><span class="line">    transform-style: preserve<span class="number">-3</span>d;</span><br><span class="line">    transform-origin: <span class="number">50</span>% <span class="number">50</span>%;</span><br><span class="line">    margin-top: calc(@size * <span class="number">.2</span> * <span class="number">-1</span>);</span><br><span class="line">    transform: rotateX(<span class="number">60</span>deg) rotateZ(<span class="number">45</span>deg) rotateY(<span class="number">0</span>deg) translateZ(<span class="number">0</span>px);</span><br><span class="line">    .box {</span><br><span class="line">      width: @size;</span><br><span class="line">      height: @size;</span><br><span class="line">      top: <span class="number">0</span>;</span><br><span class="line">      left: <span class="number">0</span>;</span><br><span class="line">      position: absolute;</span><br><span class="line">      transform-style: preserve<span class="number">-3</span>d;</span><br><span class="line">      &amp;:nth-child(<span class="number">1</span>) {</span><br><span class="line">        transform: translate(<span class="number">100</span>%, <span class="number">0</span>);</span><br><span class="line">        animation: box1 @duration linear infinite;</span><br><span class="line">      }</span><br><span class="line">      &amp;:nth-child(<span class="number">2</span>) {</span><br><span class="line">        transform: translate(<span class="number">0</span>, <span class="number">100</span>%);</span><br><span class="line">        animation: box2 @duration linear infinite;</span><br><span class="line">      }</span><br><span class="line">      &amp;:nth-child(<span class="number">3</span>) {</span><br><span class="line">        transform: translate(<span class="number">100</span>%, <span class="number">100</span>%);</span><br><span class="line">        animation: box3 @duration linear infinite;</span><br><span class="line">      }</span><br><span class="line">      &amp;:nth-child(<span class="number">4</span>) {</span><br><span class="line">        transform: translate(<span class="number">200</span>%, <span class="number">0</span>);</span><br><span class="line">        animation: box4 @duration linear infinite;</span><br><span class="line">      }</span><br><span class="line">      &amp; &gt; div {</span><br><span class="line">        background: @color;</span><br><span class="line">        position: absolute;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">        background: @color;</span><br><span class="line">        top: @top;</span><br><span class="line">        right: @right;</span><br><span class="line">        bottom: @bottom;</span><br><span class="line">        left: @left;</span><br><span class="line">        transform: rotateY(@rotateY) rotateX(@rotateX) translateZ(@translateZ);</span><br><span class="line">        &amp;:nth-child(<span class="number">1</span>) {</span><br><span class="line">          top: <span class="number">0</span>;</span><br><span class="line">          left: <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        &amp;:nth-child(<span class="number">2</span>) {</span><br><span class="line">          background: @colorRight;</span><br><span class="line">          right: <span class="number">0</span>;</span><br><span class="line">          transform: rotateY(<span class="number">90</span>deg) rotateX(@rotateX) translateZ(@translateZ);</span><br><span class="line">        }</span><br><span class="line">        &amp;:nth-child(<span class="number">3</span>) {</span><br><span class="line">          background: @colorLeft;</span><br><span class="line">          transform: rotateY(@rotateY) rotateX(<span class="number">-90</span>deg) translateZ(@translateZ);</span><br><span class="line">        }</span><br><span class="line">        &amp;:nth-child(<span class="number">4</span>) {</span><br><span class="line">          background: @shadow;</span><br><span class="line">          top: <span class="number">0</span>;</span><br><span class="line">          left: <span class="number">0</span>;</span><br><span class="line">          transform: rotateY(@rotateY) rotateX(@rotateX) translateZ(calc(@size * <span class="number">3</span> * <span class="number">-1</span>));</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  .box-tip {</span><br><span class="line">    margin-top: calc(@size * <span class="number">3.2</span>);</span><br><span class="line">    color: #1E1E1E;</span><br><span class="line">    font-size: <span class="number">14</span>px;</span><br><span class="line">  }</span><br><span class="line">  &amp;.yr-loading-sm {</span><br><span class="line">    @smSize: <span class="number">15</span>px;</span><br><span class="line">    @translateZSm: calc(@smSize / <span class="number">2</span>);</span><br><span class="line">    margin-top: <span class="number">0</span>;</span><br><span class="line">    .boxes {</span><br><span class="line">      height: calc(@smSize * <span class="number">2</span>);</span><br><span class="line">      width: calc(@smSize * <span class="number">3</span>);</span><br><span class="line">      margin-top: calc(@smSize * <span class="number">.2</span> * <span class="number">-1</span>);</span><br><span class="line">      .box {</span><br><span class="line">        width: @smSize;</span><br><span class="line">        height: @smSize;</span><br><span class="line">        &amp; &gt; div {</span><br><span class="line">            transform: rotateY(@rotateY) rotateX(@rotateX) translateZ(@translateZSm);</span><br><span class="line">            &amp;:nth-child(<span class="number">2</span>) {</span><br><span class="line">                transform: rotateY(<span class="number">90</span>deg) rotateX(@rotateX) translateZ(@translateZSm);</span><br><span class="line">            }</span><br><span class="line">            &amp;:nth-child(<span class="number">3</span>) {</span><br><span class="line">                transform: rotateY(@rotateY) rotateX(<span class="number">-90</span>deg) translateZ(@translateZSm);</span><br><span class="line">            }</span><br><span class="line">            &amp;:nth-child(<span class="number">4</span>) {</span><br><span class="line">                transform: rotateY(@rotateY) rotateX(@rotateX) translateZ(calc(@smSize * <span class="number">3</span> * <span class="number">-1</span>));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    .box-tip {</span><br><span class="line">      margin-top: calc(@smSize * <span class="number">3.2</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.yr-loading-FullScreen {</span><br><span class="line">  .yr-loading();</span><br><span class="line">  width: <span class="number">100</span>vw;</span><br><span class="line">  height: <span class="number">100</span>vh;</span><br><span class="line">  top: <span class="number">0</span>;</span><br><span class="line">  background: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">  .mask-con {</span><br><span class="line">    background: #fff;</span><br><span class="line">    border-radius: <span class="number">4</span>px;</span><br><span class="line">    width: <span class="number">180</span>px;</span><br><span class="line">    height: <span class="number">200</span>px;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">@keyframes box1 {</span><br><span class="line">  <span class="number">0</span>%,</span><br><span class="line">  <span class="number">50</span>% {</span><br><span class="line">    transform: translate(<span class="number">100</span>%, <span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">100</span>% {</span><br><span class="line">    transform: translate(<span class="number">200</span>%, <span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@keyframes box2 {</span><br><span class="line">  <span class="number">0</span>%{</span><br><span class="line">    transform: translate(<span class="number">0</span>, <span class="number">100</span>%);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">50</span>% {</span><br><span class="line">    transform: translate(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">100</span>% {</span><br><span class="line">    transform: translate(<span class="number">100</span>%, <span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@keyframes box3 {</span><br><span class="line">  <span class="number">0</span>%,</span><br><span class="line">  <span class="number">50</span>% {</span><br><span class="line">    transform: translate(<span class="number">100</span>%, <span class="number">100</span>%);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">100</span>% {</span><br><span class="line">    transform: translate(<span class="number">0</span>, <span class="number">100</span>%);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@keyframes box4 {</span><br><span class="line">  <span class="number">0</span>%{</span><br><span class="line">    transform: translate(<span class="number">200</span>%, <span class="number">0</span>);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">50</span>% {</span><br><span class="line">    transform: translate(<span class="number">200</span>%, <span class="number">100</span>%);</span><br><span class="line">  }</span><br><span class="line">  <span class="number">100</span>% {</span><br><span class="line">    transform: translate(<span class="number">100</span>%, <span class="number">100</span>%);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure><h5 id="loading-js"><a href="#loading-js" class="headerlink" title="loading.js"></a>loading.js</h5><blockquote><p>src/components/loading/loading.js</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&apos;vue&apos;</span></span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&apos;./loading.vue&apos;</span></span><br><span class="line"></span><br><span class="line">Vue.component(<span class="string">&apos;yrLoading&apos;</span>, Loading)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Mask = Vue.extend(Loading)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toggleLoading = <span class="function">(<span class="params">el, binding, vnode</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">const</span> parentEle = el</span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">typeof</span> binding.value === <span class="string">&apos;boolean&apos;</span> &amp;&amp; binding.value) || (binding.value.loading)) {</span><br><span class="line">    Vue.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      parentEle.classList.add(<span class="string">&apos;loading&apos;</span>)</span><br><span class="line">      <span class="comment">// &#x63A7;&#x5236;loading&#x7EC4;&#x4EF6;&#x663E;&#x793A;</span></span><br><span class="line">      el.instance.visible = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">if</span> (binding.modifiers.fullscreen) { <span class="comment">// &#x5168;&#x5C4F;&#x60C5;&#x51B5;&#x4E0B;</span></span><br><span class="line">        el.mask.style.top = <span class="number">0</span></span><br><span class="line">        <span class="comment">// el.instance.fullscreen = true</span></span><br><span class="line">        <span class="built_in">document</span>.body.style.overflow = <span class="string">&apos;hidden&apos;</span></span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(el.mask)</span><br><span class="line">      } <span class="keyword">else</span> { <span class="comment">// &#x975E;&#x5168;&#x5C4F;&#x60C5;&#x51B5;&#x4E0B;</span></span><br><span class="line">        <span class="comment">// el.instance.fullscreen = false</span></span><br><span class="line">        <span class="keyword">let</span> height = el.clientHeight <span class="comment">// &#x5F53;&#x524D;&#x5143;&#x7D20;&#x9AD8;&#x5EA6;</span></span><br><span class="line">        <span class="keyword">let</span> width = el.clientWidth <span class="comment">// &#x5F53;&#x524D;&#x5143;&#x7D20;&#x5BBD;&#x5EA6;</span></span><br><span class="line">        <span class="comment">// let offsetTop = el.offsetTop // &#x5F53;&#x524D;&#x5143;&#x7D20;&#x8DDD;&#x79BB;&#x9876;&#x90E8;&#x8DDD;&#x79BB;</span></span><br><span class="line">        <span class="comment">// console.log(el, width, height, el.instance.topH)</span></span><br><span class="line">        el.style.position = <span class="string">&apos;relative&apos;</span></span><br><span class="line">        <span class="comment">// &#x7ED9;&#x8499;&#x7248;&#x8D4B;&#x503C;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Array</span>.from(el.classList).includes(<span class="string">&apos;yr-table&apos;</span>) || binding.modifiers.table) { <span class="comment">// &#x5982;&#x679C;&#x662F;table&#x7EC4;&#x4EF6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8DDD;&#x79BB;table&#x9876;&#x90E8;thead&#x7684;&#x8DDD;&#x79BB;</span></span><br><span class="line">          <span class="keyword">const</span> tableHeadHeight = el.getElementsByTagName(<span class="string">&apos;thead&apos;</span>)[<span class="number">0</span>].clientHeight</span><br><span class="line">          el.mask.style.top = tableHeadHeight + <span class="string">&apos;px&apos;</span></span><br><span class="line">          el.mask.style.height = (height - tableHeadHeight) + <span class="string">&apos;px&apos;</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">          <span class="comment">// el.mask.style.top = offsetTop + &quot;px&quot;</span></span><br><span class="line">          el.mask.style.height = (height - el.instance.topH) + <span class="string">&apos;px&apos;</span></span><br><span class="line">        }</span><br><span class="line">        el.mask.style.width = width + <span class="string">&apos;px&apos;</span></span><br><span class="line">        el.appendChild(el.mask)</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// &#x79FB;&#x9664;&#x8282;&#x70B9;</span></span><br><span class="line">    parentEle.classList.remove(<span class="string">&apos;loading&apos;</span>)</span><br><span class="line">    el.mask &amp;&amp; el.mask.parentNode &amp;&amp; el.mask.parentNode.removeChild(el.mask)</span><br><span class="line">    el.instance.visible = <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="comment">// &#x53EA;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x6307;&#x4EE4;&#x7B2C;&#x4E00;&#x6B21;&#x7ED1;&#x5B9A;&#x5230;&#x5143;&#x7D20;&#x65F6;&#x8C03;&#x7528;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6027;&#x7684;&#x521D;&#x59CB;&#x5316;&#x8BBE;&#x7F6E;&#x3002;</span></span><br><span class="line">  bind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>{</span><br><span class="line">    <span class="keyword">let</span> background = binding.value.background</span><br><span class="line">    <span class="keyword">let</span> color = binding.value.color</span><br><span class="line">    <span class="keyword">let</span> fontSize = binding.value.fontSize</span><br><span class="line">    <span class="keyword">let</span> topH = binding.value.topH</span><br><span class="line">    <span class="keyword">let</span> small = binding.value.small</span><br><span class="line">    <span class="keyword">let</span> minH = binding.value.minH</span><br><span class="line">    <span class="keyword">const</span> mask = <span class="keyword">new</span> Mask({</span><br><span class="line">      el: <span class="built_in">document</span>.createElement(<span class="string">&apos;div&apos;</span>),</span><br><span class="line">      data: {</span><br><span class="line">        fullscreen: !!binding.modifiers.fullscreen,</span><br><span class="line">        background: background || <span class="string">&apos;#fff&apos;</span>,</span><br><span class="line">        color: color || <span class="literal">null</span>,</span><br><span class="line">        fontSize: fontSize || <span class="number">14</span>,</span><br><span class="line">        topH: topH || <span class="number">0</span>,</span><br><span class="line">        small: small,</span><br><span class="line">        minH: minH || <span class="number">600</span></span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    el.instance = mask</span><br><span class="line">    el.mask = mask.$el</span><br><span class="line">    <span class="comment">// el.maskStyle = {}</span></span><br><span class="line">    binding.value &amp;&amp; toggleLoading(el, binding)</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// &#x88AB;&#x7ED1;&#x5B9A;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x7236;&#x8282;&#x70B9;&#x65F6;&#x8C03;&#x7528; (&#x4EC5;&#x4FDD;&#x8BC1;&#x7236;&#x8282;&#x70B9;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x4E0D;&#x4E00;&#x5B9A;&#x5DF2;&#x88AB;&#x63D2;&#x5165;&#x6587;&#x6863;&#x4E2D;)&#x3002;</span></span><br><span class="line">  inserted: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding, vnode, oldVnode</span>) </span>{</span><br><span class="line">    <span class="comment">// console.log(&quot;&#x5143;&#x7D20;&#x63D2;&#x5165;&#x7684;&#x65F6;&#x5019;&quot;);</span></span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// &#x6240;&#x5728;&#x7EC4;&#x4EF6;&#x7684; VNode &#x66F4;&#x65B0;&#x65F6;&#x8C03;&#x7528;</span></span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (binding.oldValue !== binding.value) {</span><br><span class="line">      toggleLoading(el, binding)</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// &#x6307;&#x4EE4;&#x6240;&#x5728;&#x7EC4;&#x4EF6;&#x7684; VNode &#x53CA;&#x5176;&#x5B50; VNode &#x5168;&#x90E8;&#x66F4;&#x65B0;&#x540E;&#x8C03;&#x7528;</span></span><br><span class="line">  componentUpdated () {</span><br><span class="line">    <span class="comment">// console.log(&quot;&#x6E32;&#x67D3;&#x5B8C;&#x6210;&#x4E86;&quot;);</span></span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// &#x53EA;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x6307;&#x4EE4;&#x4E0E;&#x5143;&#x7D20;&#x89E3;&#x7ED1;&#x65F6;&#x8C03;&#x7528;</span></span><br><span class="line">  unbind: <span class="function"><span class="keyword">function</span> (<span class="params">el, binding</span>) </span>{</span><br><span class="line">    el.mask &amp;&amp; el.mask.parentNode &amp;&amp; el.mask.parentNode.removeChild(el.mask)</span><br><span class="line">    el.instance &amp;&amp; el.instance.$destroy()</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h5 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h5><blockquote><p>src/components/loading/index.js</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> loading <span class="keyword">from</span> <span class="string">&apos;./loading&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  install (Vue) {</span><br><span class="line">    Vue.directive(<span class="string">&apos;loading&apos;</span>, loading)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><p>&#x5728;&#x5165;&#x53E3;&#x6587;&#x4EF6;src/main.js&#x4E2D;&#x5F15;&#x7528;loading</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> loading <span class="keyword">from</span> <span class="string">&apos;@/components/loading&apos;</span></span><br><span class="line">Vue.use(loading)</span><br></pre></td></tr></table></figure><h5 id="&#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;"><a href="#&#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;" class="headerlink" title="&#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;"></a>&#x7EC4;&#x4EF6;&#x5185;&#x4F7F;&#x7528;</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loading-wrap&quot;</span> v-loading=<span class="string">&quot;{loading: isLoading}&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>&#x5168;&#x5C4F;loading&#xFF1A; v-loading.fullscreen</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;loading-wrap&quot;</span> v-loading.fullscreen=<span class="string">&quot;{loading: isLoading}&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>v-loading&#x53C2;&#x6570;&#xFF1A;Boolean&#x503C;&#x6216;Object&#x5BF9;&#x8C61;<br>&#x5BF9;&#x8C61;&#x5185;&#x53EF;&#x8BBE;&#x7F6E;&#x53C2;&#x6570; {<br>  loading: false, // &#x662F;&#x5426;&#x663E;&#x793A;loading<br>  background: &#x2018;#fff&#x2019;, // &#x8499;&#x7248;&#x80CC;&#x666F;&#x8272;<br>  color: null, // &#x63D0;&#x793A;&#x6587;&#x5B57;&#x989C;&#x8272;<br>  fontSize: 14, // &#x63D0;&#x793A;&#x6587;&#x5B57;&#x5927;&#x5C0F;<br>  topH: 0, // loading&#x8DDD;&#x79BB;&#x7236;&#x5143;&#x7D20;top&#x503C;<br>  small: small, // loading&#x663E;&#x793A;&#x52A8;&#x753B;&#x5143;&#x7D20;&#x5927;&#x5C0F;<br>  minH: minH // loading&#x6700;&#x5C0F;&#x9AD8;&#x5EA6;<br>}</p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>h5移动端audio消息声音依次提醒</title>
      <link href="/h5-audio-ios-2/"/>
      <url>/h5-audio-ios-2/</url>
      
        <content type="html"><![CDATA[<p>&#x5B9E;&#x73B0;&#x6548;&#x679C;&#xFF1A;&#x804A;&#x5929;&#x65F6;&#xFF0C;&#x6D88;&#x606F;&#x8FDE;&#x7EED;&#x5230;&#x6765;&#xFF0C;&#x58F0;&#x97F3;&#x4F9D;&#x6B21;&#x64AD;&#x653E;&#x3002;&#x6709;&#x591A;&#x5C11;&#x6D88;&#x606F;&#xFF0C;&#x64AD;&#x653E;&#x591A;&#x5C11;&#x6B21;&#x3002;<br>&#x8FD9;&#x79CD;&#x64AD;&#x653E;&#x6548;&#x679C;&#x5E76;&#x4E0D;&#x7406;&#x60F3;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x63D0;&#x793A;&#x97F3;&#x6B21;&#x6570;&#x662F;&#x5BF9;&#x7684;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x64AD;&#x653E;&#x4E00;&#x6B21;&#x5230;&#x4E0B;&#x6B21;&#x64AD;&#x653E;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x5DEE;&#xFF0C;<br>&#x56E0;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x64AD;&#x653E;&#x4E00;&#x4E2A;&#x97F3;&#x9891;&#xFF0C;&#x4ECE;&#x97F3;&#x9891;&#x64AD;&#x653E;&#x5230;&#x4E0D;&#x64AD;&#x653E;&#x4E4B;&#x95F4;&#x6709;&#x4E00;&#x4E2A;&#x6742;&#x97F3;&#x533A;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x64AD;&#x653E;&#x6548;&#x679C;&#x5E76;&#x4E0D;&#x5229;&#x843D;</p><p>&#x601D;&#x8DEF;&#xFF1A;&#x7EDF;&#x8BA1;&#x9700;&#x8981;&#x64AD;&#x653E;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x97F3;&#x9891;&#x6CA1;&#x6709;&#x5904;&#x4E8E;&#x64AD;&#x653E;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x64AD;&#x653E;&#x97F3;&#x9891;&#xFF0C;&#x64AD;&#x653E;&#x6B21;&#x6570;&#x51CF;&#x4E00;&#xFF0C;<br>&#x5426;&#x5219;&#x7B49;&#x97F3;&#x9891;&#x64AD;&#x653E;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x4E0B;&#x4E00;&#x6B21;&#x64AD;&#x653E;&#xFF0C;&#x76F4;&#x5230;&#x8981;&#x64AD;&#x653E;&#x7684;&#x6B21;&#x6570;&#x653E;&#x5B8C;</p><p>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;</p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;audio&quot;</span>&gt;</span><br><span class="line">    &lt;audio controls id=<span class="string">&quot;audioPlay_z&quot;</span> src=<span class="string">&quot;/file/notification.mp3&quot;</span> v-<span class="keyword">if</span>=<span class="string">&quot;!isMobile&quot;</span>&gt;&lt;/audio&gt;</span><br><span class="line">    &lt;audio controls id=<span class="string">&quot;audioPlay_z&quot;</span> src=<span class="string">&quot;/file/notification_m.mp3&quot;</span> v-<span class="keyword">else</span>&gt;&lt;/audio&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> { getPlatformType } <span class="keyword">from</span> <span class="string">&apos;@/utils&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  name: <span class="string">&apos;PlayNotifyVoice&apos;</span>,</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      audioFile: <span class="string">&apos;/file/notification.mp3&apos;</span>,</span><br><span class="line">      palyNum: <span class="number">0</span>,</span><br><span class="line">      isPlaying: <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    isiOS () {</span><br><span class="line">      <span class="keyword">return</span> !!navigator.userAgent.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>) <span class="comment">// ios</span></span><br><span class="line">    },</span><br><span class="line">    isSafari () {</span><br><span class="line">      <span class="keyword">const</span> userAgent = navigator.userAgent</span><br><span class="line">      <span class="keyword">return</span> userAgent.indexOf(<span class="string">&apos;Safari&apos;</span>) &gt; <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">&apos;Chrome&apos;</span>) === <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">&apos;Edge&apos;</span>) === <span class="number">-1</span> &amp;&amp; userAgent.indexOf(<span class="string">&apos;OPR&apos;</span>) === <span class="number">-1</span> <span class="comment">// safari</span></span><br><span class="line">    },</span><br><span class="line">    isMobile () {</span><br><span class="line">      <span class="keyword">return</span> getPlatformType() !== <span class="string">&apos;pc&apos;</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  beforeMount () {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isiOS) {</span><br><span class="line">      <span class="built_in">document</span>.body.addEventListener(<span class="string">&apos;touchstart&apos;</span>, <span class="keyword">this</span>.init, <span class="literal">false</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isSafari) {</span><br><span class="line">      <span class="built_in">document</span>.body.addEventListener(<span class="string">&apos;click&apos;</span>, <span class="keyword">this</span>.init, <span class="literal">false</span>)</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mounted () {</span><br><span class="line">    <span class="keyword">var</span> audioEle = <span class="built_in">document</span>.getElementById(<span class="string">&apos;audioPlay_z&apos;</span>)</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;ended&apos;</span>, (res) =&gt; { <span class="comment">// &#x6682;&#x505C;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;&#xFF0C;&#x5F53;&#x64AD;&#x653E;&#x5B8C;&#x4E00;&#x9996;&#x6B4C;&#x66F2;&#x65F6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;</span></span><br><span class="line">      <span class="keyword">this</span>.isPlaying = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="string">&apos;fastSeek&apos;</span> <span class="keyword">in</span> audioEle) { <span class="comment">// safari</span></span><br><span class="line">        audioEle.fastSeek(<span class="number">1</span>) <span class="comment">// &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line">        audioEle.load()</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        audioEle.currentTime = <span class="number">1</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">this</span>.palyNum = <span class="keyword">this</span>.palyNum - <span class="number">1</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;ended&apos;</span>, <span class="keyword">this</span>.palyNum)</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.palyNum &gt; <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">this</span>.playVoice()</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;playing&apos;</span>, (res) =&gt; {</span><br><span class="line">      <span class="keyword">this</span>.isPlaying = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;isPlaying&apos;</span>)</span><br><span class="line">    })</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;pause&apos;</span>, (res) =&gt; {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;pause&apos;</span>)</span><br><span class="line">    })</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;canplay&apos;</span>, (res) =&gt; {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;canplay&apos;</span>)</span><br><span class="line">    })</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;canplaythrough&apos;</span>, (res) =&gt; {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;canplaythrough&apos;</span>)</span><br><span class="line">    })</span><br><span class="line">    audioEle.addEventListener(<span class="string">&apos;timeupdate&apos;</span>, (res) =&gt; {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&apos;timeupdate&apos;</span>)</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    <span class="comment">// &#x521D;&#x59CB;&#x5316;</span></span><br><span class="line">    init () {</span><br><span class="line">      <span class="keyword">var</span> audioEle = <span class="built_in">document</span>.getElementById(<span class="string">&apos;audioPlay_z&apos;</span>)</span><br><span class="line">      <span class="keyword">let</span> playPromise = audioEle.play()</span><br><span class="line">      <span class="keyword">if</span> (playPromise !== <span class="literal">undefined</span>) {</span><br><span class="line">        playPromise.then(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">          audioEle.play()</span><br><span class="line">          audioEle.pause()</span><br><span class="line">          <span class="keyword">if</span> (<span class="string">&apos;fastSeek&apos;</span> <span class="keyword">in</span> audioEle) { <span class="comment">// safari</span></span><br><span class="line">            audioEle.fastSeek(<span class="number">1</span>) <span class="comment">// &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            audioEle.currentTime = <span class="number">1</span></span><br><span class="line">          }</span><br><span class="line">        }).catch(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&apos;play failed init&apos;</span>)</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">this</span>.palyNum = <span class="number">0</span></span><br><span class="line">      <span class="keyword">this</span>.isPlaying = <span class="literal">false</span></span><br><span class="line">      <span class="built_in">document</span>.body.removeEventListener(<span class="string">&apos;touchstart&apos;</span>, <span class="keyword">this</span>.init, <span class="literal">false</span>)</span><br><span class="line">      <span class="built_in">document</span>.body.removeEventListener(<span class="string">&apos;click&apos;</span>, <span class="keyword">this</span>.init, <span class="literal">false</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// &#x64AD;&#x653E;&#x6D88;&#x606F;&#x63D0;&#x793A;&#x97F3;</span></span><br><span class="line">    playNotifyVoice () {</span><br><span class="line">      <span class="keyword">if</span> (!!<span class="built_in">window</span>.ActiveXObject || <span class="string">&apos;ActiveXObject&apos;</span> <span class="keyword">in</span> <span class="built_in">window</span>) { <span class="comment">// IE&#x5185;&#x6838;&#x6D4F;&#x89C8;&#x5668;</span></span><br><span class="line">        <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">        <span class="keyword">var</span> OSPlayer = <span class="keyword">new</span> ActiveXObject(<span class="string">&apos;WMPLayer.OCX&apos;</span>)</span><br><span class="line">        OSPlayer.url = <span class="keyword">this</span>.audioFile</span><br><span class="line">        OSPlayer.controls.play()</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">this</span>.palyNum++</span><br><span class="line">        <span class="keyword">this</span>.playVoice()</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    playVoice () {</span><br><span class="line">      <span class="keyword">var</span> audioEle = <span class="built_in">document</span>.getElementById(<span class="string">&apos;audioPlay_z&apos;</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.isPlaying, audioEle)</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.isPlaying) {</span><br><span class="line">        <span class="keyword">let</span> playPromise = audioEle.play()</span><br><span class="line">        <span class="keyword">if</span> (playPromise !== <span class="literal">undefined</span>) {</span><br><span class="line">          playPromise.then(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;isPlaying&apos;</span>, <span class="keyword">this</span>.isPlaying, <span class="keyword">this</span>.palyNum)</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&apos;fastSeek&apos;</span> <span class="keyword">in</span> audioEle) { <span class="comment">// safari</span></span><br><span class="line">              audioEle.fastSeek(<span class="number">0</span>) <span class="comment">// &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line">              audioEle.load()</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">              audioEle.currentTime = <span class="number">0</span></span><br><span class="line">            }</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">            audioEle.play()</span><br><span class="line">          }).catch(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;play failed&apos;</span>)</span><br><span class="line">          })</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style lang=&quot;less&quot; scoped&gt;</span></span><br><span class="line"><span class="regexp">#audioPlay_z {</span></span><br><span class="line"><span class="regexp">  display: none;</span></span><br><span class="line"><span class="regexp">}</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>h5浏览器判断手机软键盘弹起和收缩</title>
      <link href="/h5-keyboard-up-down/"/>
      <url>/h5-keyboard-up-down/</url>
      
        <content type="html"><![CDATA[<p>&#x5224;&#x65AD;h5&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#xFF0C;&#x8F6F;&#x4EF6;&#x76D8;&#x7684;&#x5F39;&#x8D77;&#x548C;&#x6536;&#x7F29;</p><p>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;  </p><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isKeyboardUpFunc</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> u = navigator.userAgent</span><br><span class="line">  <span class="keyword">var</span> isAnd = u.indexOf(<span class="string">&apos;Android&apos;</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">&apos;Linux&apos;</span>) &gt; <span class="number">-1</span></span><br><span class="line">  <span class="keyword">var</span> isIOS = !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>)</span><br><span class="line">  <span class="keyword">var</span> isSafari = u.indexOf(<span class="string">&apos;Safari&apos;</span>) &gt; <span class="number">-1</span></span><br><span class="line">  <span class="keyword">var</span> _that = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">if</span> (isAnd) {</span><br><span class="line">    <span class="keyword">var</span> oh = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&apos;resize&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">      <span class="keyword">var</span> rh = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight <span class="comment">// &#x53D8;&#x5316;&#x4E4B;&#x540E;&#x7684;&#x9AD8;&#x5EA6;</span></span><br><span class="line">      <span class="keyword">if</span> (rh !== oh) {</span><br><span class="line">        <span class="comment">// &#x8F6F;&#x952E;&#x76D8;&#x5F39;&#x51FA;</span></span><br><span class="line">        _that.isKeyboardUp = <span class="literal">true</span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// &#x8F6F;&#x952E;&#x76D8;&#x6536;&#x8D77;</span></span><br><span class="line">        _that.isKeyboardUp = <span class="literal">false</span></span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">if</span> (isIOS &amp;&amp; isSafari) {</span><br><span class="line">    <span class="built_in">document</span>.body.addEventListener(<span class="string">&apos;focusin&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// &#x8F6F;&#x952E;&#x76D8;&#x5F39;&#x51FA;</span></span><br><span class="line">      _that.isKeyboardUp = <span class="literal">true</span></span><br><span class="line">    })</span><br><span class="line">    <span class="built_in">document</span>.body.addEventListener(<span class="string">&apos;focusout&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// &#x8F6F;&#x952E;&#x76D8;&#x6536;&#x8D77;</span></span><br><span class="line">      _that.isKeyboardUp = <span class="literal">false</span></span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>h5移动端audio消息声音提醒ios适配</title>
      <link href="/h5-audio-ios/"/>
      <url>/h5-audio-ios/</url>
      
        <content type="html"><![CDATA[<p>&#x5B9E;&#x73B0;&#x6548;&#x679C;&#xFF1A;&#x804A;&#x5929;&#x4E2D;&#xFF0C;&#x6709;&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x65F6;&#x58F0;&#x97F3;&#x63D0;&#x9192;&#xFF0C;&#x4E3B;&#x8981;&#x8FD0;&#x7528;audio&#x6807;&#x7B7E;&#x3002;<br>&#x6CE8;&#x610F;&#xFF1A;<br>&#x2460;audio &#x6807;&#x7B7E;src&#x987B;&#x9759;&#x6001;&#x503C;&#xFF0C;&#x82E5;&#x8BBE;&#x7F6E;&#x52A8;&#x6001;&#x503C;&#xFF0C;&#x987B;audio&#x5BF9;&#x8C61; &#x8C03;&#x7528;load()&#x65B9;&#x6CD5;<br>&#x2461;&#x58F0;&#x97F3;&#x6587;&#x4EF6;&#x8BF7;&#x7528;MP3&#x683C;&#x5F0F;&#xFF0C;wav&#x683C;&#x5F0F;&#x4E0D;&#x517C;&#x5BB9;ios<br>&#x2462;&#x5143;&#x7D20;&#x52A0;&#x8F7D;&#x540E;&#xFF0C;&#x4F7F;&#x7528;touchstart&#xFF08;h5&#xFF09;&#x6216; click&#xFF08;pc&#xFF09;&#x4E8B;&#x4EF6;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x6B21;&#x58F0;&#x97F3;&#x6587;&#x4EF6;&#xFF08;play(), pause()&#xFF09;, &#x521D;&#x59CB;&#x5316;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x53EF;&#x4E3B;&#x52A8;&#x89E6;&#x53D1;&#x58F0;&#x97F3;&#x64AD;&#x653E;<br>&#x2463;&#x521D;&#x59CB;&#x5316;&#x4E8B;&#x4EF6;&#x4E2D;&#xFF0C;pause()&#x540E;&#x987B;&#x8BBE;&#x7F6E;currentTime&#x4E3A;&#x97F3;&#x9891;&#x6700;&#x5927;&#x65F6;&#x95F4;&#x6570;&#xFF08;&#x6211;&#x8FD9;&#x91CC;&#x662F;1s&#xFF09;<br>&#x2464;&#x6BCF;&#x6B21;&#x89E6;&#x53D1;&#x64AD;&#x653E;&#x524D;&#x987B;&#x8BBE;&#x7F6E;currentTime&#x4E3A;0&#xFF08;ios&#x4F7F;&#x7528;fastSeek()&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;&#xFF0C;&#x8BBE;&#x7F6E;&#x540E;&#x987B;load()&#xFF09;<br>&#x2465;&#x64AD;&#x653E;&#x5B8C;&#x6210;&#x540E;&#x987B;&#x8BBE;&#x7F6E;currentTime&#x4E3A;&#x97F3;&#x9891;&#x6700;&#x5927;&#x65F6;&#x95F4;&#x6570;&#xFF08;&#x6211;&#x8FD9;&#x91CC;&#x662F;1s&#xFF09;, &#x53EF;&#x901A;&#x8FC7;&#x76D1;&#x542C;audio&#x5BF9;&#x8C61;&#x7684;onended&#x4E8B;&#x4EF6;&#x8BBE;&#x7F6E;</p><p>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;  </p><a id="more"></a><blockquote><p>PlayNotifyVoice&#x64AD;&#x653E;&#x58F0;&#x97F3;&#x7EC4;&#x4EF6;</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;audio controls id=<span class="string">&quot;audioPlay_z&quot;</span> src=<span class="string">&quot;/file/notification.mp3&quot;</span>&gt;&lt;/audio&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default {</span></span><br><span class="line"><span class="regexp">  name: &apos;PlayNotifyVoice&apos;,</span></span><br><span class="line"><span class="regexp">  data () {</span></span><br><span class="line"><span class="regexp">    return {</span></span><br><span class="line"><span class="regexp">      audioFile: &apos;/</span>file/notification.mp3<span class="string">&apos;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  computed: {</span></span><br><span class="line"><span class="string">    isiOS () {</span></span><br><span class="line"><span class="string">      return !!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/) // ios</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    isSafari () {</span></span><br><span class="line"><span class="string">      const userAgent = navigator.userAgent</span></span><br><span class="line"><span class="string">      return userAgent.indexOf(&apos;</span>Safari<span class="string">&apos;) &gt; -1 &amp;&amp; userAgent.indexOf(&apos;</span>Chrome<span class="string">&apos;) === -1 &amp;&amp; userAgent.indexOf(&apos;</span>Edge<span class="string">&apos;) === -1 &amp;&amp; userAgent.indexOf(&apos;</span>OPR<span class="string">&apos;) === -1 // safari</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  beforeMount () {</span></span><br><span class="line"><span class="string">    if (this.isiOS) {</span></span><br><span class="line"><span class="string">      document.body.addEventListener(&apos;</span>touchstart<span class="string">&apos;, this.init, false)</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    if (this.isSafari) {</span></span><br><span class="line"><span class="string">      document.body.addEventListener(&apos;</span>click<span class="string">&apos;, this.init, false)</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  mounted () {</span></span><br><span class="line"><span class="string">    var audioEle = document.getElementById(&apos;</span>audioPlay_z<span class="string">&apos;)</span></span><br><span class="line"><span class="string">    audioEle.addEventListener(&apos;</span>ended<span class="string">&apos;, function (res) { // &#x6682;&#x505C;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;&#xFF0C;&#x5F53;&#x64AD;&#x653E;&#x5B8C;&#x4E00;&#x9996;&#x6B4C;&#x66F2;&#x65F6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;</span></span><br><span class="line"><span class="string">      if (&apos;</span>fastSeek<span class="string">&apos; in audioEle) { // safari</span></span><br><span class="line"><span class="string">        audioEle.fastSeek(1) // &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line"><span class="string">        audioEle.load()</span></span><br><span class="line"><span class="string">      } else {</span></span><br><span class="line"><span class="string">        audioEle.currentTime = 1</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    })</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  methods: {</span></span><br><span class="line"><span class="string">    // &#x521D;&#x59CB;&#x5316;</span></span><br><span class="line"><span class="string">    init () {</span></span><br><span class="line"><span class="string">      var audioEle = document.getElementById(&apos;</span>audioPlay_z<span class="string">&apos;)</span></span><br><span class="line"><span class="string">      let playPromise = audioEle.play()</span></span><br><span class="line"><span class="string">      if (playPromise !== undefined) {</span></span><br><span class="line"><span class="string">        playPromise.then(() =&gt; {</span></span><br><span class="line"><span class="string">          audioEle.play()</span></span><br><span class="line"><span class="string">          audioEle.pause()</span></span><br><span class="line"><span class="string">          if (&apos;</span>fastSeek<span class="string">&apos; in audioEle) { // safari</span></span><br><span class="line"><span class="string">            audioEle.fastSeek(1) // &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line"><span class="string">          } else {</span></span><br><span class="line"><span class="string">            audioEle.currentTime = 1</span></span><br><span class="line"><span class="string">          }</span></span><br><span class="line"><span class="string">        }).catch(() =&gt; {</span></span><br><span class="line"><span class="string">          console.log(&apos;</span>play failed<span class="string">&apos;)</span></span><br><span class="line"><span class="string">        })</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">      document.body.removeEventListener(&apos;</span>touchstart<span class="string">&apos;, this.init, false)</span></span><br><span class="line"><span class="string">      document.body.removeEventListener(&apos;</span>click<span class="string">&apos;, this.init, false)</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    // &#x64AD;&#x653E;&#x6D88;&#x606F;&#x63D0;&#x793A;&#x97F3;</span></span><br><span class="line"><span class="string">    playNotifyVoice () {</span></span><br><span class="line"><span class="string">      if (!!window.ActiveXObject || &apos;</span>ActiveXObject<span class="string">&apos; in window) { // IE&#x5185;&#x6838;&#x6D4F;&#x89C8;&#x5668;</span></span><br><span class="line"><span class="string">        // eslint-disable-next-line</span></span><br><span class="line"><span class="string">        var OSPlayer = new ActiveXObject(&apos;</span>WMPLayer.OCX<span class="string">&apos;)</span></span><br><span class="line"><span class="string">        OSPlayer.url = this.audioFile</span></span><br><span class="line"><span class="string">        OSPlayer.controls.play()</span></span><br><span class="line"><span class="string">      } else {</span></span><br><span class="line"><span class="string">        console.log(&apos;</span>playNotifyVoice<span class="string">&apos;)</span></span><br><span class="line"><span class="string">        var audioEle = document.getElementById(&apos;</span>audioPlay_z<span class="string">&apos;)</span></span><br><span class="line"><span class="string">        let playPromise = audioEle.play()</span></span><br><span class="line"><span class="string">        if (playPromise !== undefined) {</span></span><br><span class="line"><span class="string">          playPromise.then(() =&gt; {</span></span><br><span class="line"><span class="string">            if (&apos;</span>fastSeek<span class="string">&apos; in audioEle) { // safari</span></span><br><span class="line"><span class="string">              audioEle.fastSeek(0) // &#x6539;&#x53D8;audio.currentTime&#x7684;&#x503C;</span></span><br><span class="line"><span class="string">              audioEle.load()</span></span><br><span class="line"><span class="string">            } else {</span></span><br><span class="line"><span class="string">              audioEle.currentTime = 0</span></span><br><span class="line"><span class="string">            }</span></span><br><span class="line"><span class="string">            audioEle.play()</span></span><br><span class="line"><span class="string">          }).catch(() =&gt; {</span></span><br><span class="line"><span class="string">            console.log(&apos;</span>play failed<span class="string">&apos;)</span></span><br><span class="line"><span class="string">          })</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;style lang=&quot;less&quot; scoped&gt;</span></span><br><span class="line"><span class="string">#audioPlay_z {</span></span><br><span class="line"><span class="string">  display: none;</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS原生拖拽 + 点击事件</title>
      <link href="/js-drag-click/"/>
      <url>/js-drag-click/</url>
      
        <content type="html"><![CDATA[<p>&#x539F;&#x751F;JS&#x62D6;&#x62FD;&#x8FD0;&#x7528;onmousedown&#xFF0C;onmousemove&#xFF0C;onmouseup&#x7B49;&#x4E8B;&#x4EF6;&#x6765;&#x5B9E;&#x73B0;&#x62D6;&#x62FD;&#xFF0C;&#x96BE;&#x70B9;&#x5728;&#x4E8E;&#x5728;&#x62D6;&#x62FD;&#x65F6;&#x4F1A;&#x540C;&#x65F6;&#x89E6;&#x53D1;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x3002;<br>&#x601D;&#x8DEF;&#xFF1A;<br>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;var isDrag<br>&#x5728;onmousedown&#x65F6;isDrag = false<br>&#x5728;onmousemove&#x65F6;isDrag = true, &#x540C;&#x65F6;&#x9700;&#x8981;&#x5224;&#x65AD;&#x9F20;&#x6807;&#x70B9;&#x51FB;&#x504F;&#x79FB;&#x91CF;&#x5C0F;&#x65F6;&#xFF0C;isDrag = false<br>&#x5728;click&#x4E8B;&#x4EF6;&#x65F6;&#x6839;&#x636E;isDrag&#x6765;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;<br>&#x4EE5;&#x4E0B;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#xFF1A;  </p><a id="more"></a><blockquote><p>&#x62D6;&#x62FD;&#x4E8B;&#x4EF6;</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isDrag = <span class="literal">false</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragEvent</span> (<span class="params">ele</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (!ele) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">var</span> _self = <span class="keyword">this</span></span><br><span class="line">    <span class="built_in">document</span>.ondragstart = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>{</span><br><span class="line">      <span class="keyword">var</span> event = event || <span class="built_in">window</span>.event</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    };</span><br><span class="line">    <span class="built_in">document</span>.ondragend = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>{</span><br><span class="line">      <span class="keyword">var</span> event = event || <span class="built_in">window</span>.event</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    };</span><br><span class="line">    ele.onmousedown = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">      isDrag = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">var</span> event = event || <span class="built_in">window</span>.event;  <span class="comment">//&#x517C;&#x5BB9;IE&#x6D4F;&#x89C8;&#x5668;</span></span><br><span class="line">      <span class="keyword">var</span> diffX = event.clientX - ele.offsetLeft;</span><br><span class="line">      <span class="keyword">var</span> diffY = event.clientY - ele.offsetTop;</span><br><span class="line">      <span class="keyword">var</span> startDotx = event.screenX;</span><br><span class="line">      <span class="keyword">var</span> startDoty = event.screenY;</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">typeof</span> ele.setCapture !== <span class="string">&apos;undefined&apos;</span>){</span><br><span class="line">        ele.setCapture();</span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">        isDrag = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">var</span> event = event || <span class="built_in">window</span>.event;</span><br><span class="line">        <span class="keyword">var</span> moveX = event.clientX - diffX;</span><br><span class="line">        <span class="keyword">var</span> moveY = event.clientY - diffY;</span><br><span class="line">        <span class="keyword">if</span> (startDotx &amp;&amp; startDoty) {</span><br><span class="line">          <span class="keyword">let</span> difX = event.screenX - startDotx</span><br><span class="line">          <span class="keyword">let</span> difY = event.screenY - startDoty</span><br><span class="line">          <span class="keyword">let</span> difD = <span class="built_in">Math</span>.sqrt(difX * difX + difY * difY)</span><br><span class="line">          <span class="keyword">if</span> (difD &gt;= <span class="number">0</span> &amp;&amp; difD &lt; <span class="number">5</span>) { <span class="comment">//&#x504F;&#x79FB;&#x91CF;&#x5728;0~5&#x4E4B;&#x95F4;&#x5C31;&#x6267;&#x884C;&#x5355;&#x51FB;&#x64CD;&#x4F5C;</span></span><br><span class="line">            isDrag = <span class="literal">false</span></span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(moveX &lt; <span class="number">0</span>){</span><br><span class="line">          moveX = <span class="number">0</span></span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(moveX &gt; <span class="built_in">window</span>.innerWidth - ele.offsetWidth){</span><br><span class="line">          moveX = <span class="built_in">window</span>.innerWidth - ele.offsetWidth</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(moveY &lt; <span class="number">0</span>){</span><br><span class="line">          moveY = <span class="number">0</span></span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(moveY &gt; <span class="built_in">window</span>.innerHeight - ele.offsetHeight){</span><br><span class="line">          moveY =  <span class="built_in">window</span>.innerHeight - ele.offsetHeight</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// &#x62D6;&#x62FD;&#x4E0D;&#x80FD;&#x8D85;&#x51FA;&#x6D4F;&#x89C8;&#x5668;&#x4E0B;&#x65B9;</span></span><br><span class="line">        <span class="keyword">let</span> iconWidth = ele.style.width.replace(<span class="string">&apos;px&apos;</span>, <span class="string">&apos;&apos;</span>)</span><br><span class="line">        <span class="keyword">if</span> (moveY &gt; <span class="built_in">window</span>.innerHeight - iconWidth) {</span><br><span class="line">          moveY = <span class="built_in">window</span>.innerHeight - iconWidth</span><br><span class="line">        }</span><br><span class="line">        ele.style.bottom = <span class="string">&apos;auto&apos;</span></span><br><span class="line">        ele.style.left = moveX + <span class="string">&apos;px&apos;</span>;</span><br><span class="line">        ele.style.top = moveY + <span class="string">&apos;px&apos;</span></span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line">        <span class="built_in">document</span>.onmousemove = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">document</span>.onmouseup = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//&#x4FEE;&#x590D;&#x4F4E;&#x7248;&#x672C;ie bug</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> ele.releaseCapture != <span class="string">&apos;undefined&apos;</span>){  </span><br><span class="line">          ele.releaseCapture()</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure><blockquote><p>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ele.addEventListener(<span class="string">&apos;click&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">  e.stopPropagation()</span><br><span class="line">  <span class="keyword">if</span> (isDrag) <span class="keyword">return</span> <span class="comment">// &#x62D6;&#x62FD;&#x65F6;&#x53D6;&#x6D88;&#x70B9;&#x51FB;</span></span><br><span class="line">  <span class="comment">// &#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;</span></span><br><span class="line">})</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ueditor + vue-ueditor-wrap 多语言切换及自定义上传图片按钮</title>
      <link href="/ueditor-vue/"/>
      <url>/ueditor-vue/</url>
      
        <content type="html"><![CDATA[<p><strong>&#x95EE;&#x9898;&#x573A;&#x666F;&#xFF1A;</strong><br>Ueditor&#x5728;vue&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x4F7F;&#x7528;, &#x9700;&#x8981;&#x591A;&#x8BED;&#x8A00;&#x5207;&#x6362;&#x663E;&#x793A;&#x5BF9;&#x5E94;&#x8BED;&#x8A00;&#x63D0;&#x793A;, &#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x529F;&#x80FD;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;.</p><blockquote><p>&#x7B2C;&#x4E00;&#x6B65;: &#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801; &#x5E76;&#x6253;&#x5305;&#x6210;&#x751F;&#x4EA7;&#x6587;&#x4EF6;<br>&#x7B2C;&#x4E8C;&#x6B65;: &#x4F7F;&#x7528;vue-ueditor-wrap&#x5F15;&#x5165;Ueditor<br>&#x7B2C;&#x4E09;&#x6B65;: &#x5728;vue&#x7EC4;&#x4EF6;&#x4E2D;&#x7F16;&#x5199;&#x81EA;&#x5B9A;&#x4E49;&#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x6309;&#x94AE;</p></blockquote><a id="more"></a><p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</strong></p><h5 id="&#x2460;&#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801;-&#x5E76;&#x6253;&#x5305;&#x6210;&#x751F;&#x4EA7;&#x6587;&#x4EF6;"><a href="#&#x2460;&#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801;-&#x5E76;&#x6253;&#x5305;&#x6210;&#x751F;&#x4EA7;&#x6587;&#x4EF6;" class="headerlink" title="&#x2460;&#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801; &#x5E76;&#x6253;&#x5305;&#x6210;&#x751F;&#x4EA7;&#x6587;&#x4EF6;"></a>&#x2460;&#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801; &#x5E76;&#x6253;&#x5305;&#x6210;&#x751F;&#x4EA7;&#x6587;&#x4EF6;</h5><p><strong>&#x4FEE;&#x6539;Ueditor&#x6E90;&#x7801;</strong><br>&#x4E0B;&#x8F7D;Ueditor&#x5F00;&#x53D1;&#x7248;&#x5B8C;&#x6574;&#x6E90;&#x7801;: <a href="http://ueditor.baidu.com/website/download.html#ueditor" target="_blank" rel="noopener">&#x5730;&#x5740;</a><br>&#x5B89;&#x88C5;node &#x4EE5;&#x53CA; &#x5168;&#x5C40;grunt (npm install -g grunt-cli)<br>&#x5728;&#x4E0B;&#x8F7D;&#x597D;&#x7684;Ueditor&#x6839;&#x76EE;&#x5F55;&#x5185;, &#x6267;&#x884C; npm install&#x5B89;&#x88C5;&#x4F9D;&#x8D56;<br>&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x4FEE;&#x6539;&#x5B8C;&#x6E90;&#x7801;&#x540E;, &#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x6E90;&#x7801;&#x6253;&#x5305;: Ueditor&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C; grunt&#x547D;&#x4EE4;</p><p>&#x4FEE;&#x6539;&#x6E90;&#x7801;:<br>_src/core/Editor.js &#x641C;&#x7D22; me.loadServerConfig()&#x5B9A;&#x4F4D;, &#x4FEE;&#x6539;&#x83B7;&#x53D6;&#x8BED;&#x8A00;&#x7684;&#x65B9;&#x5F0F;, &#x5982;&#x679C;&#x5F53;&#x524D;&#x6CA1;&#x6709;&#x8BED;&#x8A00;, &#x5219;&#x83B7;&#x53D6;&#x8BED;&#x8A00;&#x6587;&#x4EF6;&#x5E76;&#x52A0;&#x8F7D;, &#x82E5;&#x6709;&#x8BED;&#x8A00;&#x4E14;&#x6709;&#x6587;&#x4EF6;, &#x5219;&#x8BBE;&#x7F6E;&#x5F53;&#x524D;ueditor&#x8BED;&#x8A00;, checkCurLang&#x65B9;&#x6CD5;&#x4F1A;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x8BED;&#x8A00;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;, &#x4E0D;&#x7528;&#x8FD9;&#x4E2A;, &#x76F4;&#x63A5;&#x8BBE;&#x7F6E;&#x6211;&#x4EEC;&#x8D4B;&#x503C;&#x7684;&#x8BED;&#x8A00;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* &#x5C1D;&#x8BD5;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x540E;&#x53F0;&#x914D;&#x7F6E; */</span></span><br><span class="line">me.loadServerConfig();</span><br><span class="line"></span><br><span class="line"><span class="comment">// if(!utils.isEmptyObject(UE.I18N)){</span></span><br><span class="line"><span class="comment">//     //&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684;&#x8BED;&#x8A00;&#x7C7B;&#x578B;</span></span><br><span class="line"><span class="comment">//     me.options.lang = checkCurLang(UE.I18N);</span></span><br><span class="line"><span class="comment">//     UE.plugin.load(me);</span></span><br><span class="line"><span class="comment">//     langReadied(me);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// }else{</span></span><br><span class="line"><span class="comment">//     utils.loadFile(document, {</span></span><br><span class="line"><span class="comment">//         src: me.options.langPath + me.options.lang + &quot;/&quot; + me.options.lang + &quot;.js&quot;,</span></span><br><span class="line"><span class="comment">//         tag: &quot;script&quot;,</span></span><br><span class="line"><span class="comment">//         type: &quot;text/javascript&quot;,</span></span><br><span class="line"><span class="comment">//         defer: &quot;defer&quot;</span></span><br><span class="line"><span class="comment">//     }, function () {</span></span><br><span class="line"><span class="comment">//         UE.plugin.load(me);</span></span><br><span class="line"><span class="comment">//         langReadied(me);</span></span><br><span class="line"><span class="comment">//     });</span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line"><span class="comment">// &#x81EA;&#x4E3B;&#x4FEE;&#x6539;</span></span><br><span class="line"><span class="keyword">if</span> (UE.I18N[me.options.lang] === <span class="literal">undefined</span>) {</span><br><span class="line">    utils.loadFile(<span class="built_in">document</span>, {</span><br><span class="line">        src: me.options.langPath + me.options.lang + <span class="string">&quot;/&quot;</span> + me.options.lang + <span class="string">&quot;.js&quot;</span>,</span><br><span class="line">        tag: <span class="string">&quot;script&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;text/javascript&quot;</span>,</span><br><span class="line">        defer: <span class="string">&quot;defer&quot;</span></span><br><span class="line">    }, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        UE.plugin.load(me);</span><br><span class="line">        langReadied(me);</span><br><span class="line">    });</span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684;&#x8BED;&#x8A00;&#x7C7B;&#x578B;</span></span><br><span class="line">    <span class="comment">// console.log(me.options.lang, checkCurLang(UE.I18N))</span></span><br><span class="line">    <span class="comment">// me.options.lang = checkCurLang(UE.I18N);</span></span><br><span class="line">    UE.plugin.load(me);</span><br><span class="line">    langReadied(me);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">UE.instants[<span class="string">&apos;ueditorInstant&apos;</span> + me.uid] = me;</span><br></pre></td></tr></table></figure><p><strong>&#x6253;&#x5305;&#x6E90;&#x7801;&#x6587;&#x4EF6;</strong><br>&#x5728;Ueditor&#x6587;&#x4EF6;&#x5939;&#x6839;&#x76EE;&#x5F55;&#x4E0B;, &#x547D;&#x4EE4;&#x884C;&#x8F93;&#x5165; grunt &#x6267;&#x884C;<br>&#x6253;&#x5305;&#x540E;&#x7684;&#x751F;&#x4EA7;&#x6587;&#x4EF6;&#x5728;&#x6839;&#x76EE;&#x5F55;&#x4E0B;dist&#x5185;<br>&#x9ED8;&#x8BA4;&#x6253;&#x5305;&#x7684;php&#x540E;&#x7AEF;&#x4EE3;&#x7801;&#x76F8;&#x5173;&#x6587;&#x4EF6;<br>&#x9700;&#x8981;&#x6253;&#x5305;&#x643A;&#x5E26;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x8BED;&#x8A00;&#x7684;&#x4EE3;&#x7801;, &#x547D;&#x4EE4;&#x884C;&#x8F93;&#x5165; grunt &#x2013;server=jsp&#x6267;&#x884C;&#x5373;&#x53EF;</p><h5 id="vue&#x4E2D;&#x4F7F;&#x7528;"><a href="#vue&#x4E2D;&#x4F7F;&#x7528;" class="headerlink" title="vue&#x4E2D;&#x4F7F;&#x7528;"></a>vue&#x4E2D;&#x4F7F;&#x7528;</h5><p>&#x5C06;&#x6253;&#x5305;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x653E;&#x5165;vue-cli&#x9879;&#x76EE;public&#x5185;<br><img src="/ueditor-vue/ueditor-vue.png" alt="ueditor-vue"><br>ueditor/lang&#x4E2D;&#x4EFF;&#x7167;zh-cn&#x6587;&#x4EF6;&#x7F16;&#x5199;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x8BED;&#x8A00;&#x7684;&#x6587;&#x4EF6;, &#x5BF9;&#x5E94;&#x8BED;&#x79CD;&#x6587;&#x4EF6;&#x5939;&#x540D;, js&#x6587;&#x4EF6;&#x540D;, js&#x5185;UE.I18N[&#x2018;zh-cn&#x2019;]&#x90FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x6210;&#x5BF9;&#x5E94;&#x8BED;&#x79CD;code</p><p>&#x9879;&#x76EE;&#x4E2D;&#x5B89;&#x88C5;vue-ueditor-wrap&#x4F9D;&#x8D56;(npm install vue-ueditor-wrap)<br>&#x521B;&#x5EFA;&#x7EC4;&#x4EF6;ue.vue</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;vue-ueditor-wrap</span><br><span class="line">      ref=<span class="string">&quot;editor&quot;</span></span><br><span class="line">      v-model=<span class="string">&quot;editHtml&quot;</span></span><br><span class="line">      @ready=<span class="string">&quot;ready&quot;</span></span><br><span class="line">      :config=<span class="string">&quot;config&quot;</span></span><br><span class="line">      :destroy=<span class="string">&quot;true&quot;</span></span><br><span class="line">      @beforeInit=<span class="string">&quot;addCustomButtom&quot;</span> style=<span class="string">&quot;line-height: 1&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/vue-ueditor-wrap&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import VueUeditorWrap from &apos;vue-ueditor-wrap&apos;</span></span><br><span class="line"><span class="regexp">import { mapGetters } from &apos;vuex&apos;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const URL = process.env.NODE_ENV === &apos;production&apos; ? &apos;./u</span>editor/<span class="string">&apos; : &apos;</span>/ueditor/<span class="string">&apos;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default {</span></span><br><span class="line"><span class="string">  name: &apos;</span>UE<span class="string">&apos;,</span></span><br><span class="line"><span class="string">  components: {</span></span><br><span class="line"><span class="string">    VueUeditorWrap</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  props: {</span></span><br><span class="line"><span class="string">    value: {}</span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  data () {</span></span><br><span class="line"><span class="string">    return {</span></span><br><span class="line"><span class="string">      editor: null,</span></span><br><span class="line"><span class="string">      editHtml: &apos;</span><span class="string">&apos;,</span></span><br><span class="line"><span class="string">      // &#x914D;&#x7F6E;</span></span><br><span class="line"><span class="string">      config: {</span></span><br><span class="line"><span class="string">        // &#x7F16;&#x8F91;&#x5668;&#x4E0D;&#x81EA;&#x52A8;&#x88AB;&#x5185;&#x5BB9;&#x6491;&#x9AD8;</span></span><br><span class="line"><span class="string">        autoHeightEnabled: false,</span></span><br><span class="line"><span class="string">        // &#x521D;&#x59CB;&#x5BB9;&#x5668;&#x9AD8;&#x5EA6;</span></span><br><span class="line"><span class="string">        initialFrameHeight: 115,</span></span><br><span class="line"><span class="string">        // &#x521D;&#x59CB;&#x5BB9;&#x5668;&#x5BBD;&#x5EA6;</span></span><br><span class="line"><span class="string">        initialFrameWidth: &apos;</span><span class="number">100</span>%<span class="string">&apos;,</span></span><br><span class="line"><span class="string">        // &#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x63A5;&#x53E3;&#xFF08;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x662F;&#x6211;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5404;&#x4F4D;&#x4F53;&#x9A8C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x529F;&#x80FD;&#x642D;&#x5EFA;&#x7684;&#x4E34;&#x65F6;&#x63A5;&#x53E3;&#xFF0C;&#x8BF7;&#x52FF;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#xFF01;&#xFF01;&#xFF01;&#xFF09;</span></span><br><span class="line"><span class="string">        serverUrl: &apos;</span>http:<span class="comment">//35.201.165.105:8000/controller.php&apos;,</span></span><br><span class="line">        UEDITOR_HOME_URL: URL,</span><br><span class="line">        enableAutoSave: <span class="literal">false</span>,</span><br><span class="line">        elementPathEnabled: <span class="literal">false</span>,</span><br><span class="line">        wordCount: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// &#x83DC;&#x5355;&#x6309;&#x94AE;&#x9879; &apos;simpleupload&apos; &#x5355;&#x56FE;&#x7247;&#x4E0A;&#x4F20;&#x91CD;&#x5199;&apos;fullscreen&apos;,</span></span><br><span class="line">        toolbars: [</span><br><span class="line">          [<span class="string">&apos;source&apos;</span>, <span class="string">&apos;undo&apos;</span>, <span class="string">&apos;redo&apos;</span>, <span class="string">&apos;bold&apos;</span>, <span class="string">&apos;italic&apos;</span>, <span class="string">&apos;underline&apos;</span>, <span class="string">&apos;fontborder&apos;</span>, <span class="string">&apos;strikethrough&apos;</span>,</span><br><span class="line">            <span class="string">&apos;removeformat&apos;</span>, <span class="string">&apos;forecolor&apos;</span>, <span class="string">&apos;backcolor&apos;</span>, <span class="string">&apos;selectall&apos;</span>, <span class="string">&apos;link&apos;</span></span><br><span class="line">          ]</span><br><span class="line">        ],</span><br><span class="line">        langPath: URL + <span class="string">&apos;lang/&apos;</span>,</span><br><span class="line">        imageScaleEnabled: <span class="literal">false</span>,</span><br><span class="line">        listDefaultPaddingLeft: <span class="string">&apos;10&apos;</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      <span class="string">&apos;language&apos;</span></span><br><span class="line">    ]),</span><br><span class="line">    lang () {</span><br><span class="line">      <span class="keyword">return</span> localStorage.getItem(<span class="string">&apos;localeLanguage&apos;</span>) || <span class="string">&apos;en-US&apos;</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    value: {</span><br><span class="line">      handler (val) {</span><br><span class="line">        <span class="keyword">this</span>.editHtml = val</span><br><span class="line">      },</span><br><span class="line">      deep: <span class="literal">true</span>,</span><br><span class="line">      immediate: <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    editHtml: {</span><br><span class="line">      handler (val) {</span><br><span class="line">        <span class="keyword">this</span>.$emit(<span class="string">&apos;input&apos;</span>, val)</span><br><span class="line">      },</span><br><span class="line">      deep: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  created () {</span><br><span class="line">    <span class="keyword">this</span>.config.lang = <span class="keyword">this</span>.lang</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    <span class="comment">// &#x521B;&#x5EFA;&#x5B9E;&#x4F8B;</span></span><br><span class="line">    ready (editorInstance) {</span><br><span class="line">      <span class="keyword">this</span>.editor = editorInstance</span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// &#x521B;&#x5EFA;&#x5B9E;&#x4F8B;&#x524D; &#x81EA;&#x5B9A;&#x4E49;&#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x6309;&#x94AE;</span></span><br><span class="line">    addCustomButtom (editorId) {</span><br><span class="line">      <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">      <span class="keyword">this</span>.config.lang = <span class="keyword">this</span>.lang</span><br><span class="line">      <span class="built_in">window</span>.UE.registerUI(<span class="string">&apos;test-button&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">editor, uiName</span>) </span>{</span><br><span class="line">        <span class="comment">// &#x6CE8;&#x518C;&#x6309;&#x94AE;&#x6267;&#x884C;&#x65F6;&#x7684; command &#x547D;&#x4EE4;&#xFF0C;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x9ED8;&#x8BA4;&#x5C31;&#x4F1A;&#x5E26;&#x6709;&#x56DE;&#x9000;&#x64CD;&#x4F5C;</span></span><br><span class="line">        editor.registerCommand(uiName, {</span><br><span class="line">          execCommand: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            _this.axiosRequestImgUp(editor)</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x521B;&#x5EFA;&#x4E00;&#x4E2A; button</span></span><br><span class="line">        <span class="keyword">var</span> btn = <span class="keyword">new</span> <span class="built_in">window</span>.UE.ui.Button({</span><br><span class="line">          <span class="comment">// &#x6309;&#x94AE;&#x7684;&#x540D;&#x5B57;</span></span><br><span class="line">          name: uiName,</span><br><span class="line">          <span class="comment">// &#x63D0;&#x793A;</span></span><br><span class="line">          title: _this.$t(<span class="string">&apos;uploadImg&apos;</span>),</span><br><span class="line">          <span class="comment">// &#x9700;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x989D;&#x5916;&#x6837;&#x5F0F;&#xFF0C;&#x53EF;&#x6307;&#x5B9A; icon &#x56FE;&#x6807;&#xFF0C;&#x56FE;&#x6807;&#x8DEF;&#x5F84;&#x53C2;&#x8003;&#x5E38;&#x89C1;&#x95EE;&#x9898; 2</span></span><br><span class="line">          cssRules: <span class="string">`background-image: url(&apos;./ueditor/themes/default/images/icons.png&apos;) !important;background-position: -380px 0px;`</span>,</span><br><span class="line">          <span class="comment">// &#x70B9;&#x51FB;&#x65F6;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;</span></span><br><span class="line">          onclick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="comment">// &#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x505A;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x64CD;&#x4F5C;&#x4E5F;&#x53EF;</span></span><br><span class="line">            editor.execCommand(uiName)</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">        <span class="comment">// &#x5F53;&#x70B9;&#x5230;&#x7F16;&#x8F91;&#x5185;&#x5BB9;&#x4E0A;&#x65F6;&#xFF0C;&#x6309;&#x94AE;&#x8981;&#x505A;&#x7684;&#x72B6;&#x6001;&#x53CD;&#x5C04;</span></span><br><span class="line">        editor.addListener(<span class="string">&apos;selectionchange&apos;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">          <span class="keyword">var</span> state = editor.queryCommandState(uiName)</span><br><span class="line">          <span class="keyword">if</span> (state === <span class="number">-1</span>) {</span><br><span class="line">            btn.setDisabled(<span class="literal">true</span>)</span><br><span class="line">            btn.setChecked(<span class="literal">false</span>)</span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            btn.setDisabled(<span class="literal">false</span>)</span><br><span class="line">            btn.setChecked(state)</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">        <span class="comment">// &#x56E0;&#x4E3A;&#x4F60;&#x662F;&#x6DFB;&#x52A0; button&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x8FD9;&#x4E2A; button</span></span><br><span class="line">        <span class="keyword">return</span> btn</span><br><span class="line">      }, <span class="number">-1</span> <span class="comment">/* &#x6307;&#x5B9A;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;-1&#x4E3A;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4F4D; */</span>, editorId <span class="comment">/* &#x6307;&#x5B9A;&#x8FD9;&#x4E2A; UI &#x662F;&#x54EA;&#x4E2A;&#x7F16;&#x8F91;&#x5668;&#x5B9E;&#x4F8B;&#x4E0A;&#x7684;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x9875;&#x9762;&#x4E0A;&#x6240;&#x6709;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x90FD;&#x4F1A;&#x6DFB;&#x52A0;&#x8FD9;&#x4E2A;&#x6309;&#x94AE; */</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// &#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x63A5;&#x53E3;</span></span><br><span class="line">    axiosRequestImgUp (editor) {</span><br><span class="line">      <span class="keyword">const</span> _this = <span class="keyword">this</span></span><br><span class="line">      <span class="keyword">var</span> input = <span class="built_in">document</span>.createElement(<span class="string">&apos;input&apos;</span>)</span><br><span class="line">      input.type = <span class="string">&apos;file&apos;</span></span><br><span class="line">      input.style.display = <span class="string">&apos;none&apos;</span></span><br><span class="line">      input.accept = <span class="string">&apos;.png, .jpg, .bmp&apos;</span></span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(input)</span><br><span class="line">      input.click()</span><br><span class="line">      input.addEventListener(<span class="string">&apos;change&apos;</span>, (e) =&gt; {</span><br><span class="line">        <span class="comment">// &#x5229;&#x7528; AJAX &#x4E0A;&#x4F20;&#xFF0C;&#x4E0A;&#x4F20;&#x6210;&#x529F;&#x4E4B;&#x540E;&#x9500;&#x6BC1; DOM</span></span><br><span class="line">        <span class="keyword">const</span> file = e.target.files[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">const</span> size = file.size</span><br><span class="line">        <span class="keyword">const</span> isLt2M = size / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">2</span></span><br><span class="line">        <span class="keyword">const</span> isZero = size &gt; <span class="number">0</span></span><br><span class="line">        <span class="keyword">const</span> fileType = file.type</span><br><span class="line">        <span class="keyword">if</span> (!isZero || !isLt2M || fileType.indexOf(<span class="string">&apos;image&apos;</span>) === <span class="number">-1</span>) {</span><br><span class="line">          _this.$yrtoast(<span class="keyword">this</span>.$t(<span class="string">&apos;fileaccept&apos;</span>), <span class="number">2000</span>, <span class="string">&apos;error&apos;</span>)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData()</span><br><span class="line">        formData.append(<span class="string">&apos;file&apos;</span>, file)</span><br><span class="line">        formData.append(<span class="string">&apos;type&apos;</span>, <span class="number">2</span>)</span><br><span class="line">        _this.$store.dispatch(<span class="string">&apos;upload&apos;</span>, formData).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">          <span class="keyword">if</span> (res.code === <span class="string">&apos;10000&apos;</span>) {</span><br><span class="line">            <span class="keyword">const</span> imgUrl = res.data.fullUrl</span><br><span class="line">            editor.execCommand(<span class="string">&apos;inserthtml&apos;</span>, <span class="string">`&lt;img src=&quot;<span class="subst">${imgUrl}</span>&quot; title=&quot;<span class="subst">${file.name}</span>&quot; /&gt;`</span>)</span><br><span class="line">            <span class="comment">// this.$yrtoast(this.$t(&apos;uploaded&apos;), 1500)</span></span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            _this.$yrtoast(_this.$t(<span class="string">&apos;errorCode&apos;</span>)[res.code], <span class="number">1000</span>, <span class="string">&apos;error&apos;</span>)</span><br><span class="line">          }</span><br><span class="line">        }).catch(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">          <span class="built_in">document</span>.body.removeChild(input)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        })</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style lang=&quot;less&quot; scoped&gt;</span></span><br><span class="line"><span class="regexp">  div {</span></span><br><span class="line"><span class="regexp">    width: 100%;</span></span><br><span class="line"><span class="regexp">  }</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure><p>&#x4F7F;&#x7528;:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;UE ref=<span class="string">&quot;ue&quot;</span> v-model=<span class="string">&quot;ueHtml&quot;</span> v-<span class="keyword">if</span>=<span class="string">&quot;modalQuestion&quot;</span>&gt;&lt;/UE&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UE <span class="keyword">from</span> <span class="string">&apos;@/components/ue&apos;</span></span><br></pre></td></tr></table></figure><p>&#x8FD9;&#x91CC;&#x6211;&#x662F;&#x5728;&#x5F39;&#x7A97;&#x4E2D;&#x4F7F;&#x7528;&#x7684;, &#x4F7F;&#x7528;v-if &#x6BCF;&#x6B21;&#x6253;&#x5F00;&#x90FD;&#x751F;&#x6210;UE&#x5B9E;&#x4F8B;, &#x56E0;&#x4E3A;&#x8BED;&#x8A00;&#x5207;&#x6362;&#x4E0D;&#x5BF9;&#x5E94;, &#x6BCF;&#x6B21;&#x8BBE;&#x7F6E;&#x8BED;&#x8A00; &#x90FD;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;UE, &#x8FD9;&#x6837;&#x5BCC;&#x6587;&#x672C;&#x8BED;&#x8A00;&#x5C31;&#x662F;&#x5BF9;&#x5E94;&#x7684;<br>&#x4EE5;&#x4E0B;&#x662F;&#x5B98;&#x7F51;&#x5207;&#x6362;&#x8BED;&#x8A00;&#x505A;&#x6CD5;, &#x53EF;&#x81EA;&#x5DF1;&#x6D4B;&#x8BD5;:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ueConfig = {</span><br><span class="line">  <span class="comment">// &#x7F16;&#x8F91;&#x5668;&#x4E0D;&#x81EA;&#x52A8;&#x88AB;&#x5185;&#x5BB9;&#x6491;&#x9AD8;</span></span><br><span class="line">  autoHeightEnabled: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// &#x521D;&#x59CB;&#x5BB9;&#x5668;&#x9AD8;&#x5EA6;</span></span><br><span class="line">  initialFrameHeight: <span class="number">115</span>,</span><br><span class="line">  <span class="comment">// &#x521D;&#x59CB;&#x5BB9;&#x5668;&#x5BBD;&#x5EA6;</span></span><br><span class="line">  initialFrameWidth: <span class="string">&apos;100%&apos;</span>,</span><br><span class="line">  <span class="comment">// &#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x63A5;&#x53E3;&#xFF08;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x662F;&#x6211;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5404;&#x4F4D;&#x4F53;&#x9A8C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x529F;&#x80FD;&#x642D;&#x5EFA;&#x7684;&#x4E34;&#x65F6;&#x63A5;&#x53E3;&#xFF0C;&#x8BF7;&#x52FF;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4F7F;&#x7528;&#xFF01;&#xFF01;&#xFF01;&#xFF09;</span></span><br><span class="line">  serverUrl: <span class="string">&apos;http://35.201.165.105:8000/controller.php&apos;</span>,</span><br><span class="line">  UEDITOR_HOME_URL: URL,</span><br><span class="line">  enableAutoSave: <span class="literal">false</span>,</span><br><span class="line">  elementPathEnabled: <span class="literal">false</span>,</span><br><span class="line">  wordCount: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// &#x83DC;&#x5355;&#x6309;&#x94AE;&#x9879; &apos;simpleupload&apos; &#x5355;&#x56FE;&#x7247;&#x4E0A;&#x4F20;&#x91CD;&#x5199;&apos;fullscreen&apos;,</span></span><br><span class="line">  toolbars: [</span><br><span class="line">    [<span class="string">&apos;source&apos;</span>, <span class="string">&apos;undo&apos;</span>, <span class="string">&apos;redo&apos;</span>, <span class="string">&apos;bold&apos;</span>, <span class="string">&apos;italic&apos;</span>, <span class="string">&apos;underline&apos;</span>, <span class="string">&apos;fontborder&apos;</span>, <span class="string">&apos;strikethrough&apos;</span>,</span><br><span class="line">      <span class="string">&apos;removeformat&apos;</span>, <span class="string">&apos;forecolor&apos;</span>, <span class="string">&apos;backcolor&apos;</span>, <span class="string">&apos;selectall&apos;</span>, <span class="string">&apos;link&apos;</span></span><br><span class="line">    ]</span><br><span class="line">  ],</span><br><span class="line">  langPath: URL + <span class="string">&apos;lang/&apos;</span>,</span><br><span class="line">  imageScaleEnabled: <span class="literal">false</span>,</span><br><span class="line">  listDefaultPaddingLeft: <span class="string">&apos;10&apos;</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setLanguage</span>(<span class="params">langVal, ueConfig</span>) </span>{</span><br><span class="line">    UE.utils.extend({ <span class="attr">lang</span>: langVal }, ueConfig, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x5220;&#x9664;</span></span><br><span class="line">    UE.delEditor(<span class="string">&quot;editor&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!UE._bak_I18N) {</span><br><span class="line">        UE._bak_I18N = UE.I18N;</span><br><span class="line">    }</span><br><span class="line">    UE.I18N = {};</span><br><span class="line">    UE.I18N[ langVal ] = UE._bak_I18N[ langVal ];</span><br><span class="line"></span><br><span class="line">    UE.getEditor(<span class="string">&apos;editor&apos;</span>, { <span class="attr">lang</span>: langVal });</span><br><span class="line">}</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">watch: {</span><br><span class="line">  lang (_new) {</span><br><span class="line">    UE.utils.extend({ lang: langVal }, this.config, true);</span><br><span class="line"></span><br><span class="line">    // &#x5220;&#x9664;</span><br><span class="line">    const name = this.$refs.editor.attr(&apos;id&apos;)</span><br><span class="line">    UE.delEditor(name);</span><br><span class="line"></span><br><span class="line">    if (!UE._bak_I18N) {</span><br><span class="line">        UE._bak_I18N = UE.I18N;</span><br><span class="line">    }</span><br><span class="line">    UE.I18N = {};</span><br><span class="line">    UE.I18N[ _new ] = UE._bak_I18N[ _new ];</span><br><span class="line"></span><br><span class="line">    UE.getEditor(&apos;name, { lang: _new });</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>原生js构建消息提示框</title>
      <link href="/js-message-box/"/>
      <url>/js-message-box/</url>
      
        <content type="html"><![CDATA[<h5 id="&#x601D;&#x8DEF;"><a href="#&#x601D;&#x8DEF;" class="headerlink" title="&#x601D;&#x8DEF;"></a>&#x601D;&#x8DEF;</h5><p>&#x539F;&#x751F;js&#x6784;&#x5EFA;&#x6D88;&#x606F;&#x63D0;&#x793A;&#x6846;&#x601D;&#x8DEF;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF1A;</p><ol><li>&#x521B;&#x5EFA;&#x6D88;&#x606F;&#x6846;&#xFF0C;&#x6DFB;&#x52A0;&#x5230;body&#x4E2D;</li><li>&#x5199;&#x6D88;&#x606F;&#x6846;&#x6837;&#x5F0F;&#xFF0C;&#x5305;&#x62EC;&#x56FE;&#x6807;&#xFF0C;&#x6D88;&#x606F;&#x6587;&#x672C;&#xFF0C;&#x5173;&#x95ED;&#x6309;&#x94AE;</li><li>&#x6253;&#x5F00;&#x4E8B;&#x4EF6;&#xFF0C;&#x5173;&#x95ED;&#x4E8B;&#x4EF6;&#xFF0C;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#xFF08;&#x5B9A;&#x65F6;&#x5668;&#xFF09;&#xFF0C;&#x662F;&#x5426;&#x663E;&#x793A;&#x5173;&#x95ED;&#x6309;&#x94AE;<blockquote><p>&#x6700;&#x7EC8;&#x6548;&#x679C;&#x56FE;<br><img src="/js-message-box/js-message-box.png" alt="js-message-box"></p></blockquote></li></ol><a id="more"></a><h6 id="&#x521B;&#x5EFA;Message&#x7C7B;"><a href="#&#x521B;&#x5EFA;Message&#x7C7B;" class="headerlink" title="&#x521B;&#x5EFA;Message&#x7C7B;"></a>&#x521B;&#x5EFA;Message&#x7C7B;</h6><blockquote><p>es6&#x4EE3;&#x7801;&#xFF0C;&#x82E5;&#x9700;&#x8981;&#x517C;&#x5BB9;&#x8BF7;&#x7528;babel&#x8F6C;&#x4E00;&#x4E0B;</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> </span>{</span><br><span class="line">  <span class="keyword">constructor</span>() {</span><br><span class="line">    <span class="comment">// &#x521B;&#x5EFA;&#x6D88;&#x606F;&#x6846;&#x5143;&#x7D20;&#x5E76;&#x63D2;&#x5165;&#x5230;body&#x4E2D;</span></span><br><span class="line">    <span class="keyword">const</span> containerId = <span class="string">&apos;message-container&apos;</span>;</span><br><span class="line">    <span class="keyword">this</span>.containerEl = <span class="built_in">document</span>.getElementById(containerId);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.containerEl) {</span><br><span class="line">      <span class="keyword">this</span>.containerEl = <span class="built_in">document</span>.createElement(<span class="string">&apos;div&apos;</span>);</span><br><span class="line">      <span class="keyword">this</span>.containerEl.id = containerId;</span><br><span class="line">      <span class="built_in">document</span>.body.appendChild(<span class="keyword">this</span>.containerEl);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// type &#x6D88;&#x606F;&#x7C7B;&#x578B;  text &#x6587;&#x672C;  duration &#x6D88;&#x606F;&#x663E;&#x793A;&#x65F6;&#x95F4;  closeable &#x662F;&#x5426;&#x663E;&#x793A;&#x5173;&#x95ED;&#x56FE;&#x6807;</span></span><br><span class="line">  show({ type = <span class="string">&apos;info&apos;</span>, text = <span class="string">&apos;&apos;</span>, duration = <span class="number">2000</span>, closeable = <span class="literal">false</span> }) {</span><br><span class="line">    <span class="comment">// &#x5728;&#x6D88;&#x606F;&#x6846;&#x7236;&#x5143;&#x7D20;&#x4E2D;&#x521B;&#x5EFA;&#x5F53;&#x524D;&#x6D88;&#x606F;&#x5143;&#x7D20;</span></span><br><span class="line">    <span class="keyword">let</span> messageEl = <span class="built_in">document</span>.createElement(<span class="string">&apos;div&apos;</span>);</span><br><span class="line">    messageEl.className = type + <span class="string">&apos; message move-in&apos;</span>;</span><br><span class="line">    messageEl.innerHTML = <span class="string">`&lt;span class=&quot;iconfont icon-<span class="subst">${type}</span>&quot;&gt;&lt;/span&gt;`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x6839;&#x636E;&#x4F20;&#x53C2;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x6709;&#x6587;&#x672C;&#x521B;&#x5EFA;&#x6587;&#x672C;&#x5143;&#x7D20;&#xFF0C;&#x9700;&#x8981;&#x5173;&#x95ED;&#x6309;&#x94AE;&#x5219;&#x6DFB;&#x52A0;&#x5173;&#x95ED;&#x5143;&#x7D20;</span></span><br><span class="line">    <span class="keyword">if</span> (text) { <span class="comment">// &#x82E5;&#x6709;&#x6587;&#x672C;&#x6D88;&#x606F;&#x5219;&#x6DFB;&#x52A0;&#x8FDB;&#x6D88;&#x606F;&#x5143;&#x7D20;&#x5185;</span></span><br><span class="line">      <span class="keyword">let</span> textEl = <span class="built_in">document</span>.createElement(<span class="string">&apos;div&apos;</span>);</span><br><span class="line">      textEl.className = <span class="string">&apos;text&apos;</span>;</span><br><span class="line">      textEl.innerText = text</span><br><span class="line">      messageEl.appendChild(textEl);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (closeable) { <span class="comment">// &#x82E5;&#x9700;&#x8981;&#x5173;&#x95ED;&#x56FE;&#x6807;&#x5219;&#x521B;&#x5EFA;&#x5173;&#x95ED;&#x5143;&#x7D20;</span></span><br><span class="line">      <span class="keyword">let</span> closeEl = <span class="built_in">document</span>.createElement(<span class="string">&apos;div&apos;</span>);</span><br><span class="line">      closeEl.className = <span class="string">&apos;close iconfont icon-close&apos;</span>;</span><br><span class="line">      messageEl.appendChild(closeEl);</span><br><span class="line">      closeEl.addEventListener(<span class="string">&apos;click&apos;</span>, () =&gt; {</span><br><span class="line">        <span class="keyword">this</span>.close(messageEl) <span class="comment">// &#x5173;&#x95ED;&#x5F53;&#x524D;&#x6D88;&#x606F;&#x5143;&#x7D20;</span></span><br><span class="line">      });</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4EE5;&#x4E0A;&#x6D88;&#x606F;&#x5143;&#x7D20;&#x521B;&#x5EFA;&#x597D;&#x540E;&#x6DFB;&#x52A0;&#x5230;&#x7236;&#x7EA7;&#x6D88;&#x606F;&#x6846;&#x4E2D;</span></span><br><span class="line">    <span class="keyword">this</span>.containerEl.appendChild(messageEl);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x663E;&#x793A;&#x6301;&#x7EED;&#x65F6;&#x95F4; &#x9ED8;&#x8BA4;&#x663E;&#x793A;2s&#xFF0C;duration&#x4E3A;0&#x65F6;&#xFF0C;&#x6D88;&#x606F;&#x6846;&#x4E0D;&#x6D88;&#x5931;</span></span><br><span class="line">    <span class="keyword">if</span> (duration &gt; <span class="number">0</span>) {</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">this</span>.close(messageEl); <span class="comment">// &#x5173;&#x95ED;&#x5F53;&#x524D;&#x6D88;&#x606F;&#x5143;&#x7D20;</span></span><br><span class="line">      }, duration);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> messageEl</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// &#x5173;&#x95ED;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x6837;&#x5F0F;&#x7684;&#x5904;&#x7406;</span></span><br><span class="line">  close(messageEl) {</span><br><span class="line">    messageEl.className = messageEl.className.replace(<span class="string">&apos;move-in&apos;</span>, <span class="string">&apos;&apos;</span>);</span><br><span class="line">    <span class="comment">// &#x589E;&#x52A0;&#x4E00;&#x4E2A;move-out&#x7C7B;</span></span><br><span class="line">    messageEl.className += <span class="string">&apos;move-out&apos;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// move-out&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x540E;&#x628A;&#x5143;&#x7D20;&#x7684;&#x9AD8;&#x5EA6;&#x548C;&#x8FB9;&#x8DDD;&#x90FD;&#x8BBE;&#x7F6E;&#x4E3A;0</span></span><br><span class="line">    <span class="comment">// &#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x5728;css&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;transition&#x5C5E;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x8FC7;&#x6E21;&#x52A8;&#x753B;</span></span><br><span class="line">    messageEl.addEventListener(<span class="string">&apos;animationend&apos;</span>, () =&gt; {</span><br><span class="line">      messageEl.setAttribute(<span class="string">&apos;style&apos;</span>, <span class="string">&apos;height: 0; margin: 0&apos;</span>);</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x8FD9;&#x4E2A;&#x5730;&#x65B9;&#x662F;&#x76D1;&#x542C;transition&#x7684;&#x8FC7;&#x6E21;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x4E8B;&#x4EF6;&#xFF0C;&#x5728;&#x52A8;&#x753B;&#x7ED3;&#x675F;&#x540E;&#x628A;&#x6D88;&#x606F;&#x4ECE;dom&#x6811;&#x4E2D;&#x79FB;&#x9664;&#x3002;</span></span><br><span class="line">    messageEl.addEventListener(<span class="string">&apos;transitionend&apos;</span>, () =&gt; {</span><br><span class="line">      <span class="comment">// Element&#x5BF9;&#x8C61;&#x5185;&#x90E8;&#x6709;&#x4E00;&#x4E2A;remove&#x65B9;&#x6CD5;&#xFF0C;&#x8C03;&#x7528;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x5143;&#x7D20;&#x4ECE;dom&#x6811;&#x79CD;&#x79FB;&#x9664;&#xFF01;</span></span><br><span class="line">      messageEl.remove();</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h6 id="css&#x6837;&#x5F0F;"><a href="#css&#x6837;&#x5F0F;" class="headerlink" title="css&#x6837;&#x5F0F;"></a>css&#x6837;&#x5F0F;</h6><blockquote><p>&#x6D88;&#x606F;&#x5F39;&#x7A97;&#x6837;&#x5F0F;&#x4EFF;&#x7167;element-ui&#x7684;</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">font-face</span> {<span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&apos;//at.alicdn.com/t/font_1452792_q7efevxgs5l.eot?t=1570779373612&apos;</span>); <span class="comment">/* IE9 */</span></span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&apos;//at.alicdn.com/t/font_1452792_q7efevxgs5l.eot?t=1570779373612#iefix&apos;</span>) <span class="built_in">format</span>(<span class="string">&apos;embedded-opentype&apos;</span>), <span class="comment">/* IE6-IE8 */</span></span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&apos;data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAU0AAsAAAAACqQAAATlAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDXgqHeIZkATYCJAMcCxAABCAFhG0HXBs4CRGVnOXJviiwm5Ft1dwCtrVTU6p3CE7FmFnvR28wn+ZDbb69YQb55LsIoSYGrUPN/dquR3b9xpodLajAZgrjCSVJkcH2HDCu932Xmj0AEUBZMHTipIM7vu+7rXuysh4vw0WoALaA9X+OpV60HZ7lv7YTPJSMtgo63BsPaEARzY0DLJC92XAgPB3gxp7a8GzsvBoIABmxyAZpbu1WIIGBtQRNs2dMmwCpZAPrIRNIRqHlSAayGzwkbhv3HsCu+OvJzygkEsCBp+A9+6e2TEa9FW29oppHMzp0YN/2PACc4wAKIBsAA8jmVp8GmuayQSHP1mdQAPhCAgdhW5+bZXVY/dYU65XHQ7mblxL4Sg5g4Lb7jyeAB4gAQ+cN7PC8AFjRvgAYYGUJgAOsDgFQwOoXAAGsKbL19K9gA2+ixSN8ASQDpBggF8GSXAadz71o8gUBJXi3V2QA8Y72CSMS70WvEe3N2AS/2X4rA5YHrJx17JX5QntuvBz+8Oa5e1G33KX7D4ZdepfywOlwRBx4YAYfdkx1OIlgugm6i2A4zCtW+X9DcTrtbvcwl2vMAe2yEaoq+42retgw9aB+zQyxDztkXtGCFQ1FHTF5f/6gHjZ0qPdMIQMHtGBCVh0ww/SDxn7lgKkbgdjWHio5VS05/cAR85h+1DisalfMa/pV4zKJGHbkBz8xn+lPjcf2Iy/MV/pL47ldI+yJX1k07Jr+qZGuqFeNj7UMu3JZ+8TMGma/Yn6mZx712xwtExuRqa25IGeTr6Mcw9eWfjziZs3p6GcpPstql1Uvr12e9JYfOWPV/javgaD+1B8qm95+H9yXPTxKGZq1PPXwH4NeBmN0/fGNm47XPT1Wt2lT3fGnnnvTxmPmWY7XbdxYf7zizW3E0/oX7N9/2QsRh5JAlXeIQ0ciEyOPHObhEsmaiDrSP/+IQym68va/FYnNvsq164GlWU3SM2Z8953imu0t/gMAKL59lJd5LokvWrdZDgkNudkrbvU77HfEb9tTIr8PlsoLnbY/Iv4Ix74L8yuMKYwtiinKPBs4NUkFx9TEk/RIGuIoY/pK4X1O5dFKya/ArxC5G0FyUSn2PzUxdmnV1OqpVUsXXIi/Un+lAefL/oj7uuV9ywct32DrOofjRc+Rnq8crPkqQb3oU1sD8TTrPvvjD3ZfxKEkUOWRbStVu4nA3msBAJ45A/cL4HmN1qwHPG+8onWAx7zOV7QFAOgq7h/wOF2jWV/r78FO5Zk8zq/aYMk2APBF52Pp9mTr5SUcqOVfYrlyis2VbBc3HezLlAzRCqMMB5BlAfjqhgL9bc8Qotbhf2IIyYEjigFKkoxk2Gzg2RSDQFIHsiyn422CiDqyD5Dpi4Dw9w0cX6+A8veDZNhf4IX6B4F/FGRq8zPapDajtxMYRUDXF8WWC+c5tZc0XxDeMiNFZUz9hPg4Sevc/GrxhAKyjX38PdyoOnLCOR3pesgyplI4gdVFpFpul3lT2x5oYTmv9DQRYCgIkKsXErNYwYXLq17t8y8gdJMxpKfvTPgTCC9ePVlbWCmQJ12h6nssnd5daEONjEOc08hy5Gh4IJMcI2X7Zgmw1EK0Rqa0tTTmOa1usX9D/jivAJDxOcSOztbV3dOL/df+/k2IsLT9zVp4387YBHERNm3GHu2HkaJkrVQAAAAA&apos;</span>) <span class="built_in">format</span>(<span class="string">&apos;woff2&apos;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&apos;//at.alicdn.com/t/font_1452792_q7efevxgs5l.woff?t=1570779373612&apos;</span>) <span class="built_in">format</span>(<span class="string">&apos;woff&apos;</span>),</span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&apos;//at.alicdn.com/t/font_1452792_q7efevxgs5l.ttf?t=1570779373612&apos;</span>) <span class="built_in">format</span>(<span class="string">&apos;truetype&apos;</span>), <span class="comment">/* chrome, firefox, opera, Safari, Android, iOS 4.2+ */</span></span><br><span class="line">  <span class="built_in">url</span>(<span class="string">&apos;//at.alicdn.com/t/font_1452792_q7efevxgs5l.svg?t=1570779373612#iconfont&apos;</span>) <span class="built_in">format</span>(<span class="string">&apos;svg&apos;</span>); <span class="comment">/* iOS 4.1- */</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.iconfont</span> {</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;iconfont&quot;</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">-webkit-font-smoothing</span>: antialiased;</span><br><span class="line">  <span class="attribute">-moz-osx-font-smoothing</span>: grayscale;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-info</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e650&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-error</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e62b&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-success</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e649&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-loading</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e61c&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-close</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e6bf&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-warning</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;\e665&quot;</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#message-container</span> {</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#edf2fc</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="comment">/* &#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x6E21;&#x5C5E;&#x6027;&#xFF0C;&#x5F53;message&#x5143;&#x7D20;&#x7684;&#x9AD8;&#x5EA6;&#x548C;margin&#x53D8;&#x5316;&#x65F6;&#x5019;&#x5C06;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x8FC7;&#x6E21;&#x52A8;&#x753B; */</span></span><br><span class="line">  <span class="attribute">transition</span>: height <span class="number">0.2s</span> ease-in-out, margin <span class="number">0.2s</span> ease-in-out;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.error</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#f56c6c</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fef0f0</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#fde2e2</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.info</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#909399</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.success</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#67C23A</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f0f9eb</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#e1f3d8</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.warning</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#E6A23C</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdf6ec</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#faecd8</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.loading</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: transparent;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span> <span class="selector-class">.text</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span> <span class="selector-class">.close</span> {</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span> <span class="selector-class">.icon-loading</span> {</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: loading <span class="number">1s</span> linear infinite;</span><br><span class="line">}</span><br><span class="line">@<span class="keyword">keyframes</span> loading {</span><br><span class="line">  <span class="selector-tag">from</span> {</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(0deg);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(0deg);</span><br><span class="line">  }</span><br><span class="line">  <span class="selector-tag">to</span> {</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(360deg);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(360deg);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> message-move-in {</span><br><span class="line">  0% {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-100%);</span><br><span class="line">  }</span><br><span class="line">  100% {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(0);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.move-in</span> {</span><br><span class="line">  <span class="attribute">animation</span>: message-move-in <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">}</span><br><span class="line">@<span class="keyword">keyframes</span> message-move-out {</span><br><span class="line">  0% {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(0);</span><br><span class="line">  }</span><br><span class="line">  100% {</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-100%);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="selector-id">#message-container</span> <span class="selector-class">.message</span><span class="selector-class">.move-out</span> {</span><br><span class="line">  <span class="attribute">animation</span>: message-move-out <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">animation-fill-mode</span>: forwards;</span><br><span class="line">}</span><br></pre></td></tr></table></figure><h6 id="&#x4F7F;&#x7528;"><a href="#&#x4F7F;&#x7528;" class="headerlink" title="&#x4F7F;&#x7528;"></a>&#x4F7F;&#x7528;</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Msg = <span class="keyword">new</span> Message();</span><br><span class="line"><span class="comment">// type: error/success/info/warning/loading</span></span><br><span class="line"><span class="comment">// duration &#x663E;&#x793A;&#x65F6;&#x95F4; 0 &#x4E3A;&#x4E0D;&#x6D88;&#x5931;</span></span><br><span class="line"><span class="comment">// closeable &#x662F;&#x5426;&#x663E;&#x793A;&#x5173;&#x95ED;&#x6309;&#x94AE;</span></span><br><span class="line">Msg.show({ <span class="attr">type</span>: <span class="string">&apos;error&apos;</span>, <span class="attr">text</span>: <span class="string">&apos;&#x8FD9;&#x91CC;&#x662F;&#x663E;&#x793A;&#x7684;&#x6D88;&#x606F;&apos;</span>, <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">closeable</span>: <span class="literal">false</span> });</span><br><span class="line"><span class="comment">// &#x81EA;&#x4E3B;&#x5173;&#x95ED;&#x5F39;&#x7A97;</span></span><br><span class="line"><span class="keyword">var</span> element = Msg.show({ <span class="attr">type</span>: <span class="string">&apos;loading&apos;</span>, <span class="attr">text</span>: <span class="string">&apos;&#x6B63;&#x5728;&#x52A0;&#x8F7D;&#x4E2D;&apos;</span>, <span class="attr">duration</span>: <span class="number">0</span>, <span class="attr">closeable</span>: <span class="literal">false</span> });</span><br><span class="line">Msg.close(element)</span><br></pre></td></tr></table></figure><h6 id="babel-amp-amp-autoprefixer"><a href="#babel-amp-amp-autoprefixer" class="headerlink" title="babel &amp;&amp; autoprefixer"></a>babel &amp;&amp; autoprefixer</h6><p><a href="https://autoprefixer.github.io/" target="_blank" rel="noopener">autoprefixer online</a><br><a href="https://babeljs.io/repl" target="_blank" rel="noopener">babel online</a></p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlab内网登录push代码</title>
      <link href="/git-gitlab/"/>
      <url>/git-gitlab/</url>
      
        <content type="html"><![CDATA[<h4 id="&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF1A;"><a href="#&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF1A;" class="headerlink" title="&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF1A;"></a>&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF1A;</h4><p>&#x7535;&#x8111;&#x4E2D;&#x5DF2;&#x5B89;&#x88C5;git&#x8D26;&#x53F7;&#xFF0C;&#x6B64;&#x65F6;&#x9700;&#x8981;&#x518D;&#x5173;&#x8054;&#x5176;&#x4ED6;gitlab&#x8D26;&#x53F7;&#xFF0C;&#x63A8;&#x9001;&#x4EE3;&#x7801;</p><h5 id="&#x2460;&#x8FDB;&#x5165;&#x5F53;&#x524D;&#x9879;&#x76EE;&#xFF0C;&#x5173;&#x8054;gitlab&#x8D26;&#x53F7;"><a href="#&#x2460;&#x8FDB;&#x5165;&#x5F53;&#x524D;&#x9879;&#x76EE;&#xFF0C;&#x5173;&#x8054;gitlab&#x8D26;&#x53F7;" class="headerlink" title="&#x2460;&#x8FDB;&#x5165;&#x5F53;&#x524D;&#x9879;&#x76EE;&#xFF0C;&#x5173;&#x8054;gitlab&#x8D26;&#x53F7;"></a>&#x2460;&#x8FDB;&#x5165;&#x5F53;&#x524D;&#x9879;&#x76EE;&#xFF0C;&#x5173;&#x8054;gitlab&#x8D26;&#x53F7;</h5><blockquote><p>&#x82E5;&#x4E3A;&#x65B0;&#x9879;&#x76EE;&#xFF0C;&#x8BF7;&#x5148;&#x4F7F;&#x7528;<em>git init</em>&#x521D;&#x59CB;&#x5316;&#x3002;&#x6B64;&#x5904;&#x6CE8;&#x610F;&#xFF0C;&#x6211;&#x5E76;&#x672A;&#x628A;&#x8D26;&#x53F7;&#x5173;&#x8054;&#x5230;&#x5168;&#x5C40;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x5F53;&#x524D;&#x9879;&#x76EE;&#x7684;&#x8D26;&#x6237;</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config user.name <span class="string">&quot;&#x4F60;&#x7684;gitlab&#x7528;&#x6237;&#x540D;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config user.email <span class="string">&quot;&#x4F60;&#x7684;gitlab&#x90AE;&#x7BB1;&quot;</span></span><br></pre></td></tr></table></figure><h5 id="&#x2461;&#x5173;&#x8054;&#x5230;&#x8FDC;&#x7A0B;&#x5E93;"><a href="#&#x2461;&#x5173;&#x8054;&#x5230;&#x8FDC;&#x7A0B;&#x5E93;" class="headerlink" title="&#x2461;&#x5173;&#x8054;&#x5230;&#x8FDC;&#x7A0B;&#x5E93;"></a>&#x2461;&#x5173;&#x8054;&#x5230;&#x8FDC;&#x7A0B;&#x5E93;</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin &#x4F60;&#x7684;gitlab&#x9879;&#x76EE;&#x5730;&#x5740;</span><br></pre></td></tr></table></figure><h5 id="&#x2462;&#x6267;&#x884C;&#x547D;&#x4EE4;"><a href="#&#x2462;&#x6267;&#x884C;&#x547D;&#x4EE4;" class="headerlink" title="&#x2462;&#x6267;&#x884C;&#x547D;&#x4EE4;"></a>&#x2462;&#x6267;&#x884C;&#x547D;&#x4EE4;</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --system --<span class="built_in">unset</span> credential.helper</span><br></pre></td></tr></table></figure><blockquote><p>&#x6B64;&#x547D;&#x4EE4;&#x4F1A;&#x8BA9;&#x4F60;&#x5728;git&#x7684;push&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5F39;&#x51FA;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x7A97;&#x53E3;&#xFF0C;&#x6B64;&#x5904;&#x7531;&#x4E8E;&#x591A;&#x9879;&#x76EE;&#x7528;&#x6237;&#x540D;&#x5E76;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x56E0;&#x6B64;&#x6267;&#x884C;&#x6B64;&#x547D;&#x4EE4;</p></blockquote><h5 id="&#x2463;&#x6267;&#x884C;&#x5176;&#x4ED6;git&#x64CD;&#x4F5C;&#xFF1A;add&#x3001;commit&#x3001;push&#x7B49;"><a href="#&#x2463;&#x6267;&#x884C;&#x5176;&#x4ED6;git&#x64CD;&#x4F5C;&#xFF1A;add&#x3001;commit&#x3001;push&#x7B49;" class="headerlink" title="&#x2463;&#x6267;&#x884C;&#x5176;&#x4ED6;git&#x64CD;&#x4F5C;&#xFF1A;add&#x3001;commit&#x3001;push&#x7B49;"></a>&#x2463;&#x6267;&#x884C;&#x5176;&#x4ED6;git&#x64CD;&#x4F5C;&#xFF1A;add&#x3001;commit&#x3001;push&#x7B49;</h5>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>image示例</title>
      <link href="/image/"/>
      <url>/image/</url>
      
        <content type="html"><![CDATA[<p><img src="/image/image-example.jpg" alt="image-example"></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-echarts公共组件，切换页面图表显示不全【解决】</title>
      <link href="/vue-echarts/"/>
      <url>/vue-echarts/</url>
      
        <content type="html"><![CDATA[<p><strong>&#x95EE;&#x9898;&#x573A;&#x666F;&#xFF1A;</strong><br>&#x591A;&#x4E2A;&#x9875;&#x9762;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x4E2A;echarts&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x5728;&#x5207;&#x6362;&#x9875;&#x9762;&#x7684;&#x65F6;&#x5019;&#xFF0C;echarts&#x56FE;&#x8868;&#x6E32;&#x67D3;&#x4E0D;&#x5B8C;&#x6574;</p><p><strong>&#x539F;&#x56E0;&#xFF1A;</strong><br>echarts&#x56FE;&#x8868;&#x5BBD;&#x5EA6;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x4E0D;&#x662F;&#x5177;&#x4F53;px&#x6570;&#x503C;&#xFF0C;&#x521D;&#x6B21;&#x6E32;&#x67D3;&#x65F6;&#xFF0C;&#x53EF;&#x6B63;&#x786E;&#x6E32;&#x67D3;&#xFF0C;&#x4F46;&#x9875;&#x9762;&#x88AB;&#x7F13;&#x5B58;&#x540E;&#xFF0C;100%&#x4F1A;&#x88AB;&#x6E32;&#x67D3;&#x6210;&#x5BBD;&#x5EA6;100</p><p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</strong></p><h5 id="&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x56FA;&#x5B9A;px&#x5BBD;&#x5EA6;"><a href="#&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x56FA;&#x5B9A;px&#x5BBD;&#x5EA6;" class="headerlink" title="&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x56FA;&#x5B9A;px&#x5BBD;&#x5EA6;"></a>&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x56FA;&#x5B9A;px&#x5BBD;&#x5EA6;</h5><p>&#x4E3A;echarts&#x56FE;&#x8868;&#x8BBE;&#x7F6E;&#x56FA;&#x5B9A;px&#x5BBD;&#x5EA6;</p><blockquote><p>&#x7F3A;&#x70B9;&#xFF1A;&#x4E0D;&#x7075;&#x6D3B;&#xFF0C;&#x6709;&#x65F6;&#x6837;&#x5F0F;&#x662F;&#x81EA;&#x9002;&#x5E94;&#x7684;&#xFF0C;&#x65E0;&#x6CD5;&#x7ED9;&#x4E00;&#x4E2A;&#x786E;&#x5B9A;&#x503C;</p></blockquote><a id="more"></a><h5 id="&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x53BB;&#x9664;&#x7F13;&#x5B58;"><a href="#&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x53BB;&#x9664;&#x7F13;&#x5B58;" class="headerlink" title="&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x53BB;&#x9664;&#x7F13;&#x5B58;"></a>&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x53BB;&#x9664;&#x7F13;&#x5B58;</h5><p>&#x4E0D;&#x7F13;&#x5B58;echarts&#x56FE;&#x8868;&#x6240;&#x5728;&#x7684;&#x5F53;&#x524D;&#x9875;&#x9762;&#xFF0C;&#x6BCF;&#x6B21;&#x6253;&#x5F00;&#x9875;&#x9762;&#x65F6;&#x90FD;&#x521D;&#x59CB;&#x5316;echarts<br>&#x5229;&#x7528;keep-alive&#x7684;include/exclude&#x5C5E;&#x6027;&#xFF0C;&#x6216;&#x7ED9;router-view&#x589E;&#x52A0;key&#x5C5E;&#x6027;&#xFF0C;key&#x7684;&#x503C;&#x4FDD;&#x8BC1;&#x552F;&#x4E00;&#x6027;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;keep-alive&gt;</span><br><span class="line">    &lt;router-view :key=<span class="string">&quot;key&quot;</span>&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;<span class="regexp">/keep-alive&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    computed: {</span><br><span class="line">      key() {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.$route.name !== <span class="literal">undefined</span> ? <span class="keyword">this</span>.$route.name + <span class="keyword">new</span> <span class="built_in">Date</span>() : <span class="keyword">this</span>.$route + <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>&#x7F3A;&#x70B9;&#xFF1A;&#x6211;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x8DEF;&#x7531;&#x5185;&#x5BB9;&#x90FD;&#x662F;&#x52A8;&#x6001;&#x83B7;&#x53D6;&#x7684;&#xFF0C;&#x65E0;&#x6CD5;&#x7528;include/exclude&#x786E;&#x5B9A;name&#x503C;&#xFF0C;router-view&#x8986;&#x76D6;&#x7F51;&#x7AD9;&#x5168;&#x90E8;&#x9875;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x5B9A;&#x552F;&#x4E00;key&#x503C;&#xFF0C;&#x5219;&#x6240;&#x6709;&#x9875;&#x9762;&#x90FD;&#x4E0D;&#x4F1A;&#x7F13;&#x5B58;&#xFF0C;&#x4E0D;&#x7B26;&#x5408;&#x4E1A;&#x52A1;&#x9700;&#x6C42;</p></blockquote><h5 id="&#x65B9;&#x6848;&#x4E09;&#xFF1A;activated&#x94A9;&#x5B50;&#x51FD;&#x6570;"><a href="#&#x65B9;&#x6848;&#x4E09;&#xFF1A;activated&#x94A9;&#x5B50;&#x51FD;&#x6570;" class="headerlink" title="&#x65B9;&#x6848;&#x4E09;&#xFF1A;activated&#x94A9;&#x5B50;&#x51FD;&#x6570;"></a>&#x65B9;&#x6848;&#x4E09;&#xFF1A;activated&#x94A9;&#x5B50;&#x51FD;&#x6570;</h5><p>&#x5229;&#x7528;vue&#x751F;&#x547D;&#x5468;&#x671F;activated<br>&#x5728;&#x4F7F;&#x7528;&#x4E86;keep-alive &#x7EC4;&#x4EF6;&#x7684;&#x9875;&#x9762;&#x4E2D;&#xFF0C;keep-alive &#x7EC4;&#x4EF6;&#x6FC0;&#x6D3B;&#x65F6;&#x8C03;&#x7528;activated &#x751F;&#x547D;&#x5468;&#x671F;&#x51FD;&#x6570;&#xFF0C;&#x5373;&#x6BCF;&#x6B21;&#x8FDB;&#x5165;&#x9875;&#x9762;&#x65F6;&#x90FD;&#x4F1A;&#x8C03;&#x7528;activated&#x51FD;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8FD9;&#x4E00;&#x7279;&#x6027;&#xFF0C;&#x83B7;&#x53D6;echarts&#x56FE;&#x8868;&#x7EC4;&#x4EF6;&#x7236;&#x5143;&#x7D20;&#x7684;&#x5177;&#x4F53;&#x5BBD;&#x5EA6;&#x503C;&#xFF0C;&#x518D;&#x5229;&#x7528;echarts&#x7684;resize&#x4E8B;&#x4EF6;&#xFF0C;&#x91CD;&#x65B0;resize</p><blockquote><p>&#x4EE5;&#x4E0B;&#x4E3A;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;</p></blockquote><p>&#x7236;&#x7EC4;&#x4EF6;&#xFF1A;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;chart-box&quot;</span>&gt;</span><br><span class="line">    <span class="comment">// echarts&#x516C;&#x5171;&#x7EC4;&#x4EF6;</span></span><br><span class="line">    &lt;line-chart :chart-data=<span class="string">&quot;lineChartData&quot;</span> v-loading=<span class="string">&quot;chartLoading&quot;</span>/&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">// &#x5F15;&#x5165;echarts&#x516C;&#x5171;&#x7EC4;&#x4EF6;</span></span><br><span class="line">  <span class="keyword">import</span> LineChart <span class="keyword">from</span> <span class="string">&apos;@/components/Charts/LineChart&apos;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    components: {</span><br><span class="line">      LineChart</span><br><span class="line">    },</span><br><span class="line">    data() {</span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">        lineChartData: {},</span><br><span class="line">        chartLoading: <span class="literal">false</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><hr><p>lineChart&#x7EC4;&#x4EF6;&#xFF1A;&#x5F02;&#x6B65;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x66F4;&#x65B0;echarts&#xFF0C;&#x91CD;&#x70B9;<strong>activated&#x51FD;&#x6570;</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div ref=<span class="string">&quot;lineChart&quot;</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;className&quot;</span> :style=<span class="string">&quot;{height:height,width:width}&quot;</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">import echarts from &apos;echarts&apos;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ window resize&#x4E8B;&#x4EF6;</span></span><br><span class="line"><span class="regexp">import resize from &apos;./mi</span>xins/resize<span class="string">&apos;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// &#x4F20;&#x5165;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x8BF7;&#x53C2;&#x8003;&#x4E0B;&#x9762;:</span></span><br><span class="line"><span class="string">// const lineChartData = {</span></span><br><span class="line"><span class="string">//   chartData: [</span></span><br><span class="line"><span class="string">//     { name: &apos;</span>&#x662F;&#x7684;&#x65B9;&#x5F0F;&#x65B9;&#x6CD5;<span class="string">&apos;, value: [100, 120, 161, 134, 105, 160, 165] },</span></span><br><span class="line"><span class="string">//     { name: &apos;</span>&#x624B;&#x52A8;&#x9600;&#x624B;&#x52A8;&#x9600;<span class="string">&apos;, value: [120, 82, 91, 154, 162, 140, 145] }</span></span><br><span class="line"><span class="string">//     { name: &apos;</span><span class="number">6666</span><span class="string">&apos;, value: [100, 82, 92, 164, 132, 140, 140] },</span></span><br><span class="line"><span class="string">//     { name: &apos;</span>sdfsdf<span class="string">&apos;, value: [80, 82, 62, 154, 122, 150, 110] },</span></span><br><span class="line"><span class="string">//     { name: &apos;</span><span class="number">444</span><span class="string">&apos;, value: [90, 78, 87, 164, 152, 140, 110] }</span></span><br><span class="line"><span class="string">//   ],</span></span><br><span class="line"><span class="string">//   xaxis: [&apos;</span>Mon<span class="string">&apos;, &apos;</span>Tue<span class="string">&apos;, &apos;</span>Wed<span class="string">&apos;, &apos;</span>Thu<span class="string">&apos;, &apos;</span>Fri<span class="string">&apos;, &apos;</span>Sat<span class="string">&apos;, &apos;</span>Sun<span class="string">&apos;]</span></span><br><span class="line"><span class="string">// }</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// &#x6570;&#x636E;&#x8986;&#x76D6;&#x989C;&#x8272; &#x53EF;&#x589E;&#x52A0;</span></span><br><span class="line"><span class="string">const itemStyleColor = [</span></span><br><span class="line"><span class="string">  // &#x5706;&#x5708;&#x8282;&#x70B9; &#x7EBF; 0%&#x5904;&#x7684;&#x989C;&#x8272; 100%&#x5904;&#x7684;&#x989C;&#x8272;</span></span><br><span class="line">  [&apos;#3888fa&apos;, &apos;#638de6&apos;, &apos;#8cbcdf&apos;, &apos;#e0eff4&apos;], // &#x84DD;</span><br><span class="line">  [<span class="string">&apos;#5fbfa4&apos;</span>, <span class="string">&apos;#5ccfae&apos;</span>, <span class="string">&apos;#a8e5d3&apos;</span>, <span class="string">&apos;#e3f6f1&apos;</span>], <span class="comment">// &#x7EFF;</span></span><br><span class="line">  [<span class="string">&apos;#8c68d4&apos;</span>, <span class="string">&apos;#a78cde&apos;</span>, <span class="string">&apos;#aa86f1&apos;</span>, <span class="string">&apos;#dcd1f2&apos;</span>], <span class="comment">// &#x7D2B;</span></span><br><span class="line">  [<span class="string">&apos;#f1899b&apos;</span>, <span class="string">&apos;#ee6e73&apos;</span>, <span class="string">&apos;#ee6f74&apos;</span>, <span class="string">&apos;#fde8e9&apos;</span>], <span class="comment">// &#x6A58;&#x7C89;</span></span><br><span class="line">  [<span class="string">&apos;#0caec1&apos;</span>, <span class="string">&apos;#26c6d9&apos;</span>, <span class="string">&apos;#5bcbd8&apos;</span>, <span class="string">&apos;#87d1da&apos;</span>] <span class="comment">// &#x6E56;&#x84DD;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  mixins: [resize],</span><br><span class="line">  props: {</span><br><span class="line">    className: {</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&apos;chart&apos;</span></span><br><span class="line">    },</span><br><span class="line">    width: {</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&apos;100%&apos;</span></span><br><span class="line">    },</span><br><span class="line">    height: {</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&apos;350px&apos;</span></span><br><span class="line">    },</span><br><span class="line">    autoResize: {</span><br><span class="line">      type: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    chartData: {</span><br><span class="line">      type: [<span class="built_in">Object</span>, <span class="built_in">Array</span>],</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    title: {</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="string">&apos;&apos;</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      chart: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    chartData: {</span><br><span class="line">      handler(val) {</span><br><span class="line">        val &amp;&amp; <span class="keyword">this</span>.setOptions(val)</span><br><span class="line">      },</span><br><span class="line">      deep: <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    watch(val) {</span><br><span class="line">      <span class="keyword">this</span>.chart.resize(val, <span class="string">&apos;auto&apos;</span>)</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  activated() {</span><br><span class="line">    <span class="keyword">const</span> widthVal = <span class="built_in">window</span>.getComputedStyle(<span class="keyword">this</span>.$refs.lineChart).width</span><br><span class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">this</span>.chart.resize(widthVal)</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  mounted() {</span><br><span class="line">    <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">this</span>.initChart()</span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  beforeDestroy() {</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.chart) {</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">this</span>.chart.dispose()</span><br><span class="line">    <span class="keyword">this</span>.chart = <span class="literal">null</span></span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    <span class="comment">// &#x5207;&#x6362;&#x9875;&#x9762;&#x65F6; &#x82E5;&#x5BBD;&#x5EA6;&#x53D8;&#x5316; &#x91CD;&#x65B0;resize&#x56FE;&#x8868;</span></span><br><span class="line">    resizeChart(widthVal) {</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.chart) {</span><br><span class="line">        <span class="keyword">this</span>.chart.resize(widthVal)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    initChart() {</span><br><span class="line">      <span class="keyword">this</span>.chart = echarts.init(<span class="keyword">this</span>.$el)</span><br><span class="line">      <span class="keyword">this</span>.setOptions(<span class="keyword">this</span>.chartData)</span><br><span class="line">    },</span><br><span class="line">    setOptions({ chartData, xaxis } = {}) {</span><br><span class="line">      <span class="keyword">const</span> options = {</span><br><span class="line">        title: {</span><br><span class="line">          text: <span class="keyword">this</span>.title || <span class="string">&apos;&apos;</span>,</span><br><span class="line">          textStyle: {</span><br><span class="line">            color: <span class="string">&apos;#606266&apos;</span>,</span><br><span class="line">            fontSize: <span class="number">14</span></span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        xAxis: {</span><br><span class="line">          data: xaxis || [],</span><br><span class="line">          boundaryGap: <span class="literal">false</span>,</span><br><span class="line">          axisTick: {</span><br><span class="line">            show: <span class="literal">true</span>,</span><br><span class="line">            lineStyle: {</span><br><span class="line">              color: <span class="string">&apos;#ccc&apos;</span></span><br><span class="line">            }</span><br><span class="line">          },</span><br><span class="line">          axisLabel: {</span><br><span class="line">            rotate: <span class="number">60</span></span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        grid: {</span><br><span class="line">          left: <span class="number">50</span>,</span><br><span class="line">          right: <span class="number">50</span>,</span><br><span class="line">          bottom: <span class="number">20</span>,</span><br><span class="line">          top: <span class="number">30</span>,</span><br><span class="line">          containLabel: <span class="literal">true</span></span><br><span class="line">        },</span><br><span class="line">        tooltip: {</span><br><span class="line">          show: <span class="literal">true</span>,</span><br><span class="line">          trigger: <span class="string">&apos;axis&apos;</span>,</span><br><span class="line">          axisPointer: {</span><br><span class="line">            type: <span class="string">&apos;cross&apos;</span></span><br><span class="line">          },</span><br><span class="line">          padding: [<span class="number">5</span>, <span class="number">10</span>]</span><br><span class="line">        },</span><br><span class="line">        yAxis: {</span><br><span class="line">          axisTick: {</span><br><span class="line">            show: <span class="literal">false</span></span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        legend: {</span><br><span class="line">          icon: <span class="string">&apos;circle&apos;</span>,</span><br><span class="line">          data: chartData &amp;&amp; chartData.map(<span class="function"><span class="params">item</span> =&gt;</span> item.name)</span><br><span class="line">        },</span><br><span class="line">        series: []</span><br><span class="line">      }</span><br><span class="line">      options.series = <span class="keyword">this</span>.setSeries(chartData)</span><br><span class="line">      <span class="keyword">this</span>.chart.setOption(options, {</span><br><span class="line">        notMerge: <span class="literal">true</span> <span class="comment">// &#x6BCF;&#x6B21;&#x5237;&#x65B0;&#x6E05;&#x7A7A;&#x4E0A;&#x6B21;&#x6570;&#x636E;</span></span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    setSeries(chartData) {</span><br><span class="line">      <span class="keyword">const</span> seriesData = []</span><br><span class="line">      chartData &amp;&amp; chartData.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> {</span><br><span class="line">        seriesData.push(</span><br><span class="line">          {</span><br><span class="line">            name: item.name || <span class="string">&apos;&apos;</span>,</span><br><span class="line">            itemStyle: {</span><br><span class="line">              normal: {</span><br><span class="line">                color: itemStyleColor[index][<span class="number">0</span>], <span class="comment">// &#x5706;&#x5708;&#x8282;&#x70B9;</span></span><br><span class="line">                lineStyle: {</span><br><span class="line">                  color: itemStyleColor[index][<span class="number">1</span>], <span class="comment">// &#x7EBF;</span></span><br><span class="line">                  width: <span class="number">2</span></span><br><span class="line">                },</span><br><span class="line">                areaStyle: { <span class="comment">// &#x586B;&#x5145;&#x8272;</span></span><br><span class="line">                  color: {</span><br><span class="line">                    type: <span class="string">&apos;linear&apos;</span>,</span><br><span class="line">                    x: <span class="number">0</span>,</span><br><span class="line">                    y: <span class="number">0</span>,</span><br><span class="line">                    x2: <span class="number">0</span>,</span><br><span class="line">                    y2: <span class="number">1</span>,</span><br><span class="line">                    colorStops: [</span><br><span class="line">                      { <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: itemStyleColor[index][<span class="number">2</span>] }, <span class="comment">// 0%&#x5904;&#x7684;&#x989C;&#x8272;</span></span><br><span class="line">                      { <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: itemStyleColor[index][<span class="number">3</span>] } <span class="comment">// 100%&#x5904;&#x7684;&#x989C;&#x8272;</span></span><br><span class="line">                    ],</span><br><span class="line">                    global: <span class="literal">false</span></span><br><span class="line">                  }</span><br><span class="line">                }</span><br><span class="line">              }</span><br><span class="line">            },</span><br><span class="line">            smooth: <span class="literal">true</span>, <span class="comment">// &#x66F2;&#x7EBF;</span></span><br><span class="line">            type: <span class="string">&apos;line&apos;</span>, <span class="comment">// &#x7EBF;</span></span><br><span class="line">            data: item.value || [],</span><br><span class="line">            animationDuration: <span class="number">2800</span>,</span><br><span class="line">            animationEasing: <span class="string">&apos;cubicInOut&apos;</span></span><br><span class="line">          }</span><br><span class="line">        )</span><br><span class="line">      })</span><br><span class="line">      <span class="keyword">return</span> seriesData</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><hr><p>resize.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { debounce } <span class="keyword">from</span> <span class="string">&apos;@/utils&apos;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  data() {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      $_sidebarElm: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mounted() {</span><br><span class="line">    <span class="keyword">this</span>.__resizeHandler = debounce(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.chart) {</span><br><span class="line">        <span class="keyword">this</span>.chart.resize()</span><br><span class="line">      }</span><br><span class="line">    }, <span class="number">100</span>)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&apos;resize&apos;</span>, <span class="keyword">this</span>.__resizeHandler)</span><br><span class="line">    <span class="comment">// &#x4FA7;&#x8FB9;&#x680F;&#x5143;&#x7D20; &#x5C55;&#x5F00;&#x6536;&#x7F29;</span></span><br><span class="line">    <span class="keyword">this</span>.$_sidebarElm = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&apos;side-bar-box&apos;</span>)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">this</span>.$_sidebarElm &amp;&amp; <span class="keyword">this</span>.$_sidebarElm.addEventListener(<span class="string">&apos;transitionend&apos;</span>, <span class="keyword">this</span>.$_sidebarResizeHandler)</span><br><span class="line">  },</span><br><span class="line">  beforeDestroy() {</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&apos;resize&apos;</span>, <span class="keyword">this</span>.__resizeHandler)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.$_sidebarElm &amp;&amp; <span class="keyword">this</span>.$_sidebarElm.removeEventListener(<span class="string">&apos;transitionend&apos;</span>, <span class="keyword">this</span>.$_sidebarResizeHandler)</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    $_sidebarResizeHandler(e) {</span><br><span class="line">      <span class="keyword">if</span> (e.propertyName === <span class="string">&apos;width&apos;</span>) {</span><br><span class="line">        <span class="keyword">this</span>.__resizeHandler()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>置顶功能</title>
      <link href="/hexo-top/"/>
      <url>/hexo-top/</url>
      
        <content type="html"><![CDATA[<p>&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x7F6E;&#x9876;</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加密</title>
      <link href="/hexo-encrypt/"/>
      <url>/hexo-encrypt/</url>
      
        <content type="html"><![CDATA[<div id="hbe-security">  <div class="hbe-input-container">  <input type="password" class="hbe-form-control" id="pass" placeholder="您好, 这里需要密码." />    <label for="pass">您好, 这里需要密码.</label>    <div class="bottom-line"></div>  </div></div><div id="decryptionError" style="display: none;">Incorrect Password!</div><div id="noContentError" style="display: none;">No content to display!</div><div id="encrypt-blog" style="display:none">U2FsdGVkX19QCq1ym8OJlugWWLvD8KYwko9Co7H0gT85VkL8w1as3KCgQ0iTq+CfpaVYRKT5ocK3bywCKrWqo2+CkWxWhy4TUkUMyWw6kh9dbQZTpedUYZjbCkz8+4ratExO7qza8sVXSC5VSs/KOPueKkZryfVvPS0udiJmGbtlU9QU3k+3yRGX3uWjLLFVR72/wqAX6EJoxCocO3w0gtmIRz3lfZk2iEVRIUF6OmXKo0dIb7DGZvY0/faLZEj3XuWOsgrodH1yx0S0OOhIAIIGtNaalHYjlrC6KTbjLz5mP4LYdidTktSNui4sCI73NJvU5Gg10nGJWojGQ7ezzqGqsdhrjycQBR5Ohpa19rUIYszlpFQdgYTZw7x3ccsUis84fl6SkY+Xu8dP0U73EKpbsIp0a2kfQ+1EJsdCwfwkk/ZdHxmmXIXngWhXHaFldOpUPyAl65t20gat8mMsnLzNXyZZ0pEXcfAJPD1HK4BQsZ5Hv8oumHrmQW2lQ2Ngzs964Tb9+LSrHY3e4qPbJIAWgJpqfTFjUkiBf9NGB9RsLBS3CZMYxWANpZDC2fx4/S4e0O0fiuHUL40q8MfWOWSRmEmpjoEQvQ4SbMrjYvxjT6yMqd2NdKnecIMqZGiSO0x3L235o7qsR6NUvHEBHWoFBtrGrsazbjtdhb6pPPv0yfyLUTENbQvxexJueMNpkxVOvGWAMYZitj3zKA9v1LRSqfe9QYNOiMcrmpE4oVQLvGQtIktYxCiZE899mFY3aA9sZm80KiQQ+jADBxEzZN2JLGVDkJbKW/sWwaro2PaS5cM/Bdsf3AXICmXNiEeFfPEhsXdQdNi8MK8RavyIgrMICP3qj2Js3Rqmg1RzM46Ih1L+aCVBOaz3jswZVlJZhutW0AvJfkQhjskR1xyV3RNBzPWLjTuVQCQNrHc9ClUzM2jA8qJK3NpCVDPrAcyh7FEnGmzaPFhjmbIejxWZ9m8wKw5PDm6XjljeOZuqzcgZOy8kbL6Y1vkqBmBw6zRx1+21haQP6Is0OA6lsT3vrYLIvFxHmvNN8eNNMsR47O715yxSmRCe0dz6XeOnekngLX1mQ9SbpveN2EAx0EyLsmY6OP4UQP8WopsBSpuWqV9dYvX/57xIsho2qA8lhrMWxt2uAcOaWKVDrUXkbn4XJGDC5u6WD9Db8hlbhP2qGgv8WJEGaGJMvLJ1iEPBz7RCJP/SOZCFTKMJ20nYV0nV+uRDZrUF6Weq+0KrU7shHpSHPdGAiLu4VQquTk2vM8gH/fpLVVtWi9sWsvbar1q097lk8dQpykd5aLYTZUBYSWdAZTUX2Ll7Sd+g9eeL4itbGSk5R0HingnVAKFkjidoFvttmdgVaqKcRZW4VuS6Q+PutWHjVHO3nqvoHe9gKzKdK/maL5A6BmDIY/fcPY+yBkng/nKqbq3giVjk8mblBzd4gwACleANdVtFdUW0TvzpdbW9okxOvK/bzZ+IkmhOaJ1A5b/tIRPcjTkt/cbrG+KeFE7HFKv6fx4SP+tkeG8rcAi8oO/t6Ili9RwNPNKx48dYOYdlhLSEs8kLr90RJVTt5TH0rqK8uC0xbJrgyIHK3oQE3BKbuTWZRaCxAHdKINC5KRFwqHn8w8JldFVPO/56g6WOiGrkpvvZRJsDHE/wC/7jqlIBtUUGZ0faQCgJjRMeLYWAZ2JkD/6xSUxK8lK3lkx6D7Y04QdSx4JFMBM20EZQqK4tDNeP0T69rJUCVDgF8OXnRhEoYsrcOzCnetiFnsKJ++noC900gWt51UT+Xv7f5nZyfh3NClv97V3TG7hzlk1H9lBIMEkRObySrwuyeGa5PZ1kl6yuqaeKjH7CUE1rwhf3mImNPWG8V/iF8R/G8TXID8JQ9KEvGUy1nBfZsGPSEQOOeOKMJJ9uDqn0euKNV5237naD5wsxvy8aRjvuvTYItiQZDkqfie1yT2u2zK5zIJCVRsNvGsYdXdRzXncPReI7tmDf8+KoJdtiiL2C1t8bOQZXRxMHSOfFWZ9opp9X8qZv+IwUO8PXsZBhU9ff+bk+uszqpGbDFs5u6r5YzA/cWrfCwvgs9dzpktndzMsCcefZKRioaTmWpOasD4tT+hpwMH+gXTDKBU3cL4VVC16kuPwb3XGgxvJMpN5rwol1zfCoMjoC1bPyoEO8iXomsuOqyHvhBuYKohMZAdHIvYqHxWJpEfizPm0ABapjr72XKNfo+O8vIF79s9SYpfYBBgZPyPBHFZUGJA8m73q8w89ypiLyPE2PQ6WEuSAgblxHgjjqH9atEf1iCLX20UtfBhyrCAeJLyW1XuB6lxLGi3oqC8hyiKC8ojvaniEEJ+x9v1rRry613Cyvu4br7ZRaUAaGzVIS/JioLiXOH6MNgRNKkpRAeXX8pOfeiq4zZIo96Xt40N2LB7GRjw80xU/NOu2mK7KdDXhcX8ciOsheZBXAwDfPa1zk0tu2tEsoZVyZVOvBmt8AAd8uKgWREUMlBADWmHrdhJ4ouJ1OBQEmFQQ6k8zSeu5f5x2IDBccxv72mlP84IoSqUNMTzEf2gyRvFOfO3/zkGq0lhtuugKE2BAHPF2obFtMecHQ4lxwLQ/8vHE63AQLT/gZRnNhTJFfYwZ0tsiUP9xnmT46bEJrltXeODRn758j9FIXsPVLsVPfggvum5xW90VqPB0a9l3zBeXPMZbZ3Kwioj+uqYo6PaWGDPy/NOxTp2jIwFcWsnJlqrTsr/+mVSMVnJmw4XFxCkRxy53IRa8uLnJQUrS572ya1bF47xR+6fVEaiMnBD9TwnNgSkAWj5eCQhus0UVsCH036IpSMssESCwAoiUoByQDM2L8zOz0F8G2tzZfHeiafgiOReZBtac/bVvSI2kRsNTqF3oCJQvKCMb9+jWhTbcDjVXyn6pD8TQzx1ZcgCrGgb3W+rzgkrGX4JrJfO+PwutllXXRiUXMR3bHp2RbjDo+Z/w069nCN/L+qp1VJ0pQy4hlByZPL8ktHhE00iHFxR2ZrkdfDaQHs/CS0ylX5xokzsgSIMclporMFT/6pZ+hgDkGJccM9EzVqiDvlMWl3oCcDDl65TXQ1p4skCSkMlcQU56IXFFDwijYKtdQbprXOGjXLuq0g1kkpZZdjmepfKZNzRksCwgnbVU9v4EGjhZmmhXaQbN/FgnY1Q4M/QdOWaamW/deyyv7ER3F6gUHg/sy4VUnGfI/qVeLUq83QV69LAqziyGWuDRSE/urtnYLOfE40sZ2scLb9K3flabzxCDaNInlNZGavnTDjmvaf85XvjXrA8yGHEM8iZpL1VzbqdFjLUHWRkmI+WMHwgE9DKtdl7LB7mOHXE14JkNi8pqLQDjxW3JOpKQBcKV8aIJ4OYw8WqfySscxwOBRnCJsiwcq46hwD1SgU4P6VE9Sm5tSViP1p5NV5zrKiGHgHKU8XhKft889Af23o7ZAqmeT6f6GRGtO48ADFfHZBgzcSu1vbqFH9c8y7A9KaaiXllVVVcGyyfF056JBgRAQ56sRdgU708O4ZWCZi2aRtbSqGxUuKCqXlFD2mifugHbaPiF3G1B9n2MZT9JNcgVjaMUeVUjeFOucYtiiOOm6G4OyGUM0QM2OyficZ7XCElRjOO6H13Tz97NmAGjMjduu0NYxdYyV5zqj0cJ7Esf0xcAOej51gn875bzPWAyvWpjL26WNh7WPrL9IyHAeD/BrMjH1qb+do09HcmxR6xvSldKVD3Csg0ILWQws549vFIUD4SibrUPs9PqHiuYSLfrgbWPxa9Mn7SuVBhkhTLqLhRtahrNIjfJ/8QKGk4WGiYgqE5gNJ3njvm9lWd+MYItg</div><script src="/lib/crypto-js.js"></script><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阅读更多</title>
      <link href="/hexo-readmore/"/>
      <url>/hexo-readmore/</url>
      
        <content type="html"><![CDATA[<p>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;<br>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;<br>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;</p><a id="more"></a><p>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;<br>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;<br>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;<br>&#x6D4B;&#x8BD5;&#x8D5B;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;&#x6240;</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&apos;test&apos;</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
